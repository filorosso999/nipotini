<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåà Gioca e Impara - LUTE Nipotini</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --rosso: #FF6B6B;
            --arancione: #FFA94D;
            --giallo: #FFE066;
            --verde: #69DB7C;
            --azzurro: #74C0FC;
            --viola: #B197FC;
            --rosa: #F783AC;
            --turchese: #38D9A9;
            --indaco: #5C7CFA;
            --corallo: #FF8787;
            --lime: #A9E34B;
            --celeste: #66D9E8;
            --bianco: #FFFFFF;
            --grigio: #868E96;
            --testo: #495057;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #E8F4FD 0%, #FCE4EC 50%, #FFF3E0 100%);
            min-height: 100vh;
            color: var(--testo);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--azzurro) 0%, var(--viola) 100%);
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: clamp(22px, 5vw, 36px);
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            font-weight: 900;
        }

        .header-subtitle {
            font-size: clamp(14px, 2.5vw, 18px);
            color: rgba(255,255,255,0.9);
            font-weight: 600;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Schermate */
        .screen {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sezione titolo */
        .section-title {
            text-align: center;
            font-size: clamp(22px, 4vw, 28px);
            margin: 20px 0;
            font-weight: 800;
            color: var(--testo);
        }

        .section-subtitle {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }

        /* Cards Menu Incontri */
        .meetings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding: 10px 0;
        }

        .meeting-card {
            background: white;
            border-radius: 25px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 25px rgba(0,0,0,0.1);
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .meeting-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .meeting-card .emoji {
            font-size: 55px;
            display: block;
            margin-bottom: 10px;
        }

        .meeting-card h2 {
            font-size: 20px;
            margin-bottom: 5px;
            font-weight: 800;
        }

        .meeting-card p {
            font-size: 16px;
            color: #666;
            font-weight: 600;
        }

        .meeting-card.c1 { border-color: var(--rosso); }
        .meeting-card.c2 { border-color: var(--arancione); }
        .meeting-card.c3 { border-color: var(--verde); }
        .meeting-card.c4 { border-color: var(--azzurro); }
        .meeting-card.c5 { border-color: var(--viola); }
        .meeting-card.c6 { border-color: var(--rosa); }
        .meeting-card.c7 { border-color: var(--turchese); }
        .meeting-card.c8 { border-color: var(--indaco); }
        .meeting-card.c9 { border-color: var(--corallo); }
        .meeting-card.c10 { border-color: var(--lime); }
        .meeting-card.c11 { border-color: var(--celeste); }
        .meeting-card.c12 { border-color: var(--giallo); }

        /* Attivit√† cards */
        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 18px;
            padding: 15px 0;
        }

        .activity-card {
            background: white;
            border-radius: 20px;
            padding: 22px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 18px rgba(0,0,0,0.1);
            border: 3px solid var(--azzurro);
        }

        .activity-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .activity-card .emoji {
            font-size: 45px;
            margin-bottom: 8px;
        }

        .activity-card h3 {
            font-size: 18px;
            font-weight: 700;
        }

        /* Pulsanti */
        .btn {
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 5px;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-back {
            background: linear-gradient(135deg, #868E96 0%, #495057 100%);
            color: white;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--verde) 0%, #20C997 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--azzurro) 0%, var(--viola) 100%);
            color: white;
        }

        /* Game Area */
        .game-area {
            background: white;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            min-height: 420px;
        }

        .game-title {
            font-size: clamp(22px, 4vw, 30px);
            text-align: center;
            margin-bottom: 18px;
            font-weight: 900;
        }

        /* Score */
        .score-bar {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 18px;
            flex-wrap: wrap;
        }

        .score-item {
            background: linear-gradient(135deg, var(--giallo) 0%, var(--arancione) 100%);
            padding: 10px 22px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
        }

        /* Quiz */
        .quiz-content {
            text-align: center;
        }

        .quiz-image {
            font-size: 100px;
            margin: 15px 0;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        .quiz-question {
            font-size: clamp(18px, 3vw, 24px);
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--viola);
        }

        .answer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
        }

        .answer-btn {
            background: linear-gradient(135deg, var(--azzurro) 0%, var(--viola) 100%);
            color: white;
            border: none;
            padding: 22px 12px;
            font-size: clamp(16px, 2.8vw, 22px);
            font-weight: 700;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }

        .answer-btn:hover {
            transform: scale(1.04);
        }

        .answer-btn.correct {
            background: linear-gradient(135deg, var(--verde) 0%, #20C997 100%);
            animation: pulse 0.5s ease;
        }

        .answer-btn.wrong {
            background: linear-gradient(135deg, var(--rosso) 0%, #E03131 100%);
            animation: shake 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Memory */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 480px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--azzurro) 0%, var(--viola) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(22px, 5vw, 36px);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            border: 3px solid var(--verde);
        }

        .memory-card.matched {
            background: linear-gradient(135deg, var(--verde) 0%, #20C997 100%);
        }

        .memory-card .back { display: block; }
        .memory-card .front { display: none; }
        .memory-card.flipped .back,
        .memory-card.matched .back { display: none; }
        .memory-card.flipped .front,
        .memory-card.matched .front { display: block; }

        /* Matching */
        .matching-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 15px;
        }

        .matching-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .matching-item {
            background: white;
            border: 4px solid var(--azzurro);
            border-radius: 18px;
            padding: 18px 25px;
            font-size: 36px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 110px;
        }

        .matching-item:hover {
            transform: scale(1.05);
        }

        .matching-item.selected {
            border-color: var(--arancione);
            background: var(--giallo);
        }

        .matching-item.matched {
            border-color: var(--verde);
            background: #D3F9D8;
            cursor: default;
        }

        .matching-item.text {
            font-size: 18px;
            font-weight: 700;
        }

        /* Instruments */
        .instruments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 12px;
            max-width: 700px;
            margin: 0 auto;
        }

        .instrument-btn {
            background: white;
            border: 3px solid var(--arancione);
            border-radius: 18px;
            padding: 15px 10px;
            font-size: 40px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .instrument-btn::after {
            content: attr(title);
            font-size: 11px;
            font-weight: 600;
            color: #555;
        }

        .instrument-btn:hover {
            transform: scale(1.08);
        }

        .instrument-btn.playing {
            background: var(--giallo);
            animation: pulse 0.3s ease;
        }

        @media (max-width: 500px) {
            .instruments-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }
            .instrument-btn {
                padding: 12px 8px;
                font-size: 35px;
            }
            .instrument-btn::after {
                font-size: 10px;
            }
        }

        /* Sorting Game */
        .sorting-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .sorting-item {
            font-size: 75px;
            animation: bounce 2s ease-in-out infinite;
        }

        .sorting-options {
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .sorting-btn {
            background: white;
            border: 4px solid var(--viola);
            border-radius: 18px;
            padding: 18px 35px;
            font-size: 22px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }

        .sorting-btn:hover {
            background: var(--viola);
            color: white;
        }

        /* Drawing */
        .drawing-container {
            text-align: center;
        }

        .canvas-container {
            background: white;
            border: 4px solid var(--azzurro);
            border-radius: 18px;
            padding: 8px;
            display: inline-block;
            margin: 15px 0;
        }

        #drawCanvas {
            border-radius: 14px;
            cursor: crosshair;
            touch-action: none;
        }

        .color-palette {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin: 12px 0;
        }

        .color-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 4px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .color-btn:hover, .color-btn.active {
            transform: scale(1.2);
            border-color: #333;
        }

        /* Rhythm */
        .rhythm-display {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .rhythm-note {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            transition: all 0.3s ease;
        }

        .rhythm-note.active {
            animation: rhythmPulse 0.3s ease;
        }

        @keyframes rhythmPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .rhythm-input {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .rhythm-btn {
            width: 75px;
            height: 75px;
            border-radius: 50%;
            border: none;
            font-size: 36px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .rhythm-btn:active {
            transform: scale(0.9);
        }

        /* Freeplay (Suona i Colori) */
        .freeplay-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
            padding: 10px;
        }

        .freeplay-btn {
            aspect-ratio: 1;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 90px;
        }

        .freeplay-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(0,0,0,0.35);
        }

        .freeplay-btn:active,
        .freeplay-btn.playing {
            transform: scale(0.92);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .freeplay-btn .note-name {
            font-size: 22px;
            font-weight: 800;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-family: 'Nunito', sans-serif;
        }

        @media (max-width: 500px) {
            .freeplay-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            .freeplay-btn {
                min-height: 100px;
            }
            .freeplay-btn .note-name {
                font-size: 26px;
            }
        }

        /* Sequence */
        .sequence-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .sequence-item {
            min-width: 80px;
            padding: 15px 20px;
            background: white;
            border: 4px solid var(--azzurro);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }

        .sequence-item.text-item {
            font-size: 18px;
            font-weight: 700;
            min-width: 100px;
            padding: 12px 15px;
        }

        .sequence-item.mystery {
            background: linear-gradient(135deg, var(--rosa) 0%, var(--viola) 100%);
            color: white;
            font-size: 32px;
        }

        .sequence-item.mystery.text-item {
            font-size: 22px;
        }

        /* Feedback */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .feedback-overlay.show {
            display: flex;
        }

        .feedback-box {
            background: white;
            padding: 35px 55px;
            border-radius: 28px;
            text-align: center;
            animation: popIn 0.4s ease;
        }

        @keyframes popIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .feedback-emoji {
            font-size: 70px;
            margin-bottom: 12px;
        }

        .feedback-text {
            font-size: 26px;
            font-weight: 800;
        }

        .feedback-box.success .feedback-text { color: var(--verde); }
        .feedback-box.error .feedback-text { color: var(--rosso); }

        /* Encouragement */
        .encouragement {
            text-align: center;
            font-size: 20px;
            font-weight: 700;
            color: var(--viola);
            margin: 12px 0;
            min-height: 28px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 18px;
            color: #666;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .meetings-grid, .activity-grid {
                grid-template-columns: 1fr;
            }
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .answer-grid {
                grid-template-columns: 1fr;
            }
            .matching-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <img src="https://res.cloudinary.com/dad6kqoyy/image/upload/v1768844135/LUTE_1_nnovbi.jpg" 
                 alt="Logo LUTE" 
                 style="height: 55px; border-radius: 8px; background: white; padding: 4px;"
                 onerror="this.style.display='none'">
            <div>
                <h1>üåà Gioca e Impara!</h1>
                <p class="header-subtitle">Ai nipotini dei soci della LUTE</p>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- MENU PRINCIPALE -->
        <section id="main-menu" class="screen active">
            <h2 class="section-title">Scegli un Gioco! üéØ</h2>
            <p class="section-subtitle">35 giochi divertenti per i nipotini! üéà</p>
            <div class="meetings-grid" id="meetings-grid"></div>
        </section>

        <!-- MENU INCONTRO -->
        <section id="meeting-menu" class="screen">
            <button class="btn btn-back" onclick="goToMain()">‚¨ÖÔ∏è Menu Principale</button>
            <h2 id="meeting-title" class="section-title"></h2>
            <div class="activity-grid" id="activity-list"></div>
        </section>

        <!-- AREA GIOCO -->
        <section id="game-screen" class="screen">
            <button class="btn btn-back" onclick="goToMeeting()">‚¨ÖÔ∏è Torna alle Attivit√†</button>
            <div class="game-area" id="game-area"></div>
            <div style="text-align: center; margin-top: 18px;">
                <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()">‚û°Ô∏è Avanti</button>
            </div>
        </section>
    </main>

    <!-- FEEDBACK -->
    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-box" id="feedback-box">
            <div class="feedback-emoji" id="feedback-emoji"></div>
            <div class="feedback-text" id="feedback-text"></div>
        </div>
    </div>

    <footer class="footer">
        <strong>LUTE Milazzo</strong> ‚Ä¢ Libera Universit√† per la Terza Et√†
    </footer>

    <script>
        // ==================== AUDIO ====================
        let audioCtx = null;
        
        function getAudioContext() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            return audioCtx;
        }

        // Suono PIANO - motivetto allegro (Fra Martino)
        // ============================================================
        // BRANI MUSICALI DA 6 SECONDI - Melodie allegre per i ragazzi
        // ============================================================
        
        // Sistema per fermare i suoni in corso
        var activeTimeouts = [];
        var activeOscillators = [];
        
        function stopAllSounds() {
            // Ferma tutti i timeout programmati
            for (var i = 0; i < activeTimeouts.length; i++) {
                clearTimeout(activeTimeouts[i]);
            }
            activeTimeouts = [];
            
            // Ferma tutti gli oscillatori attivi
            for (var j = 0; j < activeOscillators.length; j++) {
                try {
                    activeOscillators[j].stop();
                } catch(e) {}
            }
            activeOscillators = [];
        }

        // üéπ PIANO - "Inno alla Gioia" di Beethoven
        function playPiano() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 250;
            
            // Melodia completa dell'Inno alla Gioia
            var melody = [
                330, 330, 349, 392, 392, 349, 330, 294, 262, 262, 294, 330, 330, 294, 294, 0,
                330, 330, 349, 392, 392, 349, 330, 294, 262, 262, 294, 330, 294, 262, 262, 0,
                294, 294, 330, 262, 294, 330, 349, 330, 262, 294, 330, 349, 330, 294, 262, 294, 196, 0,
                330, 330, 349, 392, 392, 349, 330, 294, 262, 262, 294, 330, 294, 262, 262
            ];
            
            // Basso armonico
            var bass = [
                131, 0, 175, 0, 196, 0, 175, 0, 131, 0, 131, 0, 196, 0, 196, 0,
                131, 0, 175, 0, 196, 0, 175, 0, 131, 0, 131, 0, 131, 0, 131, 0,
                196, 0, 196, 0, 196, 0, 196, 0, 196, 0, 196, 0, 196, 0, 147, 0, 147, 0,
                131, 0, 175, 0, 196, 0, 175, 0, 131, 0, 131, 0, 131, 0, 131
            ];
            
            var numNotes = Math.min(melody.length, 24);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playPianoNote(ctx, melody[idx], 0.22);
                        if (idx < bass.length && bass[idx] > 0) playPianoNote(ctx, bass[idx], 0.12);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playPianoNote(ctx, freq, vol) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'triangle';
            osc2.type = 'sine';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 2;
            osc.connect(gain);
            osc2.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(vol, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.4);
            osc2.stop(ctx.currentTime + 0.4);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // üé∏ CHITARRA - "La Cucaracha" (messicana allegra)
        function playGuitar() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 180;
            
            // La Cucaracha - melodia allegra
            var melody = [
                262, 262, 262, 349, 440, 0, 0, 262, 262, 262, 349, 440, 0, 0,
                349, 349, 330, 330, 294, 294, 262, 0,
                262, 262, 262, 330, 392, 0, 0, 262, 262, 262, 330, 392, 0, 0,
                392, 392, 349, 349, 330, 330, 294, 0,
                294, 330, 349, 349, 349, 349, 330, 294, 262, 330, 294, 262, 247, 262, 0, 0,
                262, 262, 262, 349, 440, 0, 0, 349, 349, 330, 330, 294, 294, 262
            ];
            
            // Accordi di accompagnamento
            var chords = [
                131, 0, 0, 196, 0, 165, 0, 131, 0, 0, 196, 0, 165, 0,
                175, 0, 175, 0, 196, 0, 131, 0,
                131, 0, 0, 196, 0, 165, 0, 131, 0, 0, 196, 0, 165, 0,
                196, 0, 175, 0, 165, 0, 147, 0,
                147, 0, 175, 0, 175, 0, 175, 0, 131, 0, 131, 0, 147, 131, 0, 0,
                131, 0, 0, 196, 0, 165, 0, 175, 0, 175, 0, 196, 0, 131
            ];
            
            var numNotes = Math.min(melody.length, 33);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playGuitarNote(ctx, melody[idx], 0.25);
                        if (idx < chords.length && chords[idx] > 0) playGuitarNote(ctx, chords[idx], 0.15);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playGuitarNote(ctx, freq, vol) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            osc.type = 'triangle';
            osc2.type = 'sawtooth';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 1.001;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(2000, ctx.currentTime);
            filter.frequency.exponentialRampToValueAtTime(500, ctx.currentTime + 0.3);
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(vol, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.35);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.35);
            osc2.stop(ctx.currentTime + 0.35);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // ü•Å TAMBURO - Ritmo rock/pop trascinante
        function playDrum() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 125; // 120 BPM
            
            // Pattern ritmico di 6 secondi
            // K=kick, S=snare, H=hihat
            var pattern = [];
            for (var bar = 0; bar < 6; bar++) {
                // Ogni battuta: K-H-S-H-K-H-S-H (rock beat classico)
                pattern.push({ t: bar * 8 * tempo, type: 'kick' });
                pattern.push({ t: bar * 8 * tempo + tempo, type: 'hihat' });
                pattern.push({ t: bar * 8 * tempo + tempo * 2, type: 'snare' });
                pattern.push({ t: bar * 8 * tempo + tempo * 3, type: 'hihat' });
                pattern.push({ t: bar * 8 * tempo + tempo * 4, type: 'kick' });
                pattern.push({ t: bar * 8 * tempo + tempo * 4.5, type: 'kick' });
                pattern.push({ t: bar * 8 * tempo + tempo * 5, type: 'hihat' });
                pattern.push({ t: bar * 8 * tempo + tempo * 6, type: 'snare' });
                pattern.push({ t: bar * 8 * tempo + tempo * 7, type: 'hihat' });
            }
            
            pattern.forEach(function(beat) {
                if (beat.t < 6000) {
                    var t = setTimeout(function() {
                        if (beat.type === 'kick') playKick(ctx);
                        else if (beat.type === 'snare') playSnare(ctx);
                        else playHihat(ctx);
                    }, beat.t);
                    activeTimeouts.push(t);
                }
            });
        }
        
        function playKick(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(150, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(40, ctx.currentTime + 0.1);
            osc.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.7, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.2);
            activeOscillators.push(osc);
        }
        
        function playSnare(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'triangle';
            osc.frequency.value = 200;
            osc.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.1);
            activeOscillators.push(osc);
            // Rumore
            var bufferSize = ctx.sampleRate * 0.1;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            var noiseGain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 2000;
            noise.connect(filter);
            filter.connect(noiseGain);
            noiseGain.connect(ctx.destination);
            noiseGain.gain.setValueAtTime(0.3, ctx.currentTime);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.08);
            noise.start(ctx.currentTime);
        }
        
        function playHihat(ctx) {
            var bufferSize = ctx.sampleRate * 0.05;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 7000;
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.15, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.05);
            noise.start(ctx.currentTime);
        }

        // üé∫ TROMBA - "When The Saints Go Marching In"
        function playTrumpet() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 220;
            
            // When The Saints - melodia gospel allegra
            var melody = [
                262, 330, 349, 392, 0, 0, 262, 330, 349, 392, 0, 0,
                262, 330, 349, 392, 0, 349, 330, 262, 330, 294, 0, 0,
                330, 330, 294, 262, 262, 0, 330, 392, 392, 392, 349, 0,
                349, 330, 349, 392, 330, 0, 262, 294, 262, 0, 0, 0,
                262, 330, 349, 392, 0, 0, 262, 330, 349, 392, 0, 0,
                392, 392, 392, 349, 330, 349, 392, 330, 262, 294, 262, 0
            ];
            
            var bass = [
                131, 0, 0, 196, 0, 0, 131, 0, 0, 196, 0, 0,
                131, 0, 0, 196, 0, 175, 165, 131, 165, 147, 0, 0,
                165, 0, 147, 131, 131, 0, 165, 196, 196, 0, 175, 0,
                175, 165, 175, 196, 165, 0, 131, 147, 131, 0, 0, 0,
                131, 0, 0, 196, 0, 0, 131, 0, 0, 196, 0, 0,
                196, 0, 0, 175, 165, 175, 196, 165, 131, 147, 131, 0
            ];
            
            var numNotes = Math.min(melody.length, 27);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playTrumpetNote(ctx, melody[idx], 0.3);
                        if (idx < bass.length && bass[idx] > 0) playTrumpetNote(ctx, bass[idx], 0.1);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playTrumpetNote(ctx, freq, dur) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(800, ctx.currentTime);
            filter.frequency.linearRampToValueAtTime(1800, ctx.currentTime + 0.05);
            filter.frequency.linearRampToValueAtTime(1200, ctx.currentTime + 0.2);
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(dur, ctx.currentTime + 0.03);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.25);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.25);
            activeOscillators.push(osc);
        }

        // üéª VIOLINO - "Can Can" di Offenbach (allegro e divertente)
        function playViolin() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 140;
            
            // Can Can - melodia vivace
            var melody = [
                392, 0, 392, 440, 392, 0, 330, 0, 392, 0, 392, 440, 392, 0, 330, 0,
                392, 440, 494, 523, 494, 440, 392, 0, 440, 0, 440, 494, 440, 0, 349, 0,
                440, 0, 440, 494, 440, 0, 349, 0, 440, 494, 523, 587, 523, 494, 440, 0,
                494, 0, 494, 0, 523, 0, 494, 0, 440, 0, 392, 0, 349, 0, 330, 0,
                392, 0, 392, 440, 392, 0, 330, 0, 392, 0, 392, 440, 392, 0, 330, 0,
                392, 440, 494, 523, 587, 523, 494, 440, 392, 0, 0, 0, 392, 0, 0, 0
            ];
            
            var numNotes = Math.min(melody.length, 43);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playViolinNote(ctx, melody[idx], 0.18);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playViolinNote(ctx, freq, dur) {
            var osc = ctx.createOscillator();
            var vibrato = ctx.createOscillator();
            var vibratoGain = ctx.createGain();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            vibrato.type = 'sine';
            vibrato.frequency.value = 6;
            vibratoGain.gain.value = 4;
            vibrato.connect(vibratoGain);
            vibratoGain.connect(osc.frequency);
            filter.type = 'lowpass';
            filter.frequency.value = 4000;
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(dur, ctx.currentTime + 0.02);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.15);
            vibrato.start(ctx.currentTime);
            osc.start(ctx.currentTime);
            vibrato.stop(ctx.currentTime + 0.15);
            osc.stop(ctx.currentTime + 0.15);
            activeOscillators.push(osc);
            activeOscillators.push(vibrato);
        }

        // üîî CAMPANA - "Fra Martino" (campanile)
        function playBell() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 350;
            
            // Fra Martino - perfetta per le campane
            var melody = [
                523, 587, 659, 523, 523, 587, 659, 523,
                659, 698, 784, 0, 659, 698, 784, 0,
                784, 880, 784, 698, 659, 523, 784, 880, 784, 698, 659, 523,
                523, 392, 523, 0, 523, 392, 523, 0,
                523, 587, 659, 523, 523, 587, 659, 523
            ];
            
            var harmony = [
                262, 294, 330, 262, 262, 294, 330, 262,
                330, 349, 392, 0, 330, 349, 392, 0,
                392, 440, 392, 349, 330, 262, 392, 440, 392, 349, 330, 262,
                262, 196, 262, 0, 262, 196, 262, 0,
                262, 294, 330, 262, 262, 294, 330, 262
            ];
            
            var numNotes = Math.min(melody.length, 17);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playBellNote(ctx, melody[idx]);
                        if (idx < harmony.length && harmony[idx] > 0) playBellNote(ctx, harmony[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playBellNote(ctx, freq) {
            var harmonics = [1, 2, 2.4, 3, 4.2];
            var volumes = [0.25, 0.12, 0.08, 0.05, 0.03];
            harmonics.forEach(function(mult, i) {
                var osc = ctx.createOscillator();
                var gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.value = freq * mult;
                osc.connect(gain);
                gain.connect(ctx.destination);
                gain.gain.setValueAtTime(volumes[i], ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.8);
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 0.8);
                activeOscillators.push(osc);
            });
        }

        // ü™à FLAUTO - "Il Pastore Svizzero" (dolce e ariosa)
        function playFlute() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 200;
            var melody = [
                523, 587, 659, 784, 659, 587, 523, 0,
                587, 659, 784, 880, 784, 659, 587, 0,
                659, 784, 880, 784, 659, 587, 523, 0,
                523, 587, 523, 0, 523, 0
            ];
            var numNotes = Math.min(melody.length, 30);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playFluteNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playFluteNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            // Flauto: onda sinusoidale pura con leggero soffio
            osc.type = 'sine';
            osc2.type = 'triangle';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 2;
            filter.type = 'lowpass';
            filter.frequency.value = 2000;
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.25, ctx.currentTime + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.35);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.35);
            osc2.stop(ctx.currentTime + 0.35);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // üé∑ SASSOFONO - "Pink Panther style" (jazz)
        function playSaxophone() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 250;
            var melody = [
                311, 330, 349, 370, 349, 330, 311, 0,
                349, 370, 392, 415, 392, 370, 349, 0,
                311, 349, 392, 349, 311, 0,
                294, 311, 349, 311, 294, 0
            ];
            var numNotes = Math.min(melody.length, 24);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playSaxNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playSaxNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            // Sassofono: ricco di armoniche con vibrato
            osc.type = 'sawtooth';
            osc2.type = 'square';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 1.5;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(1200, ctx.currentTime);
            filter.frequency.linearRampToValueAtTime(2500, ctx.currentTime + 0.1);
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.2, ctx.currentTime + 0.05);
            gain.gain.setValueAtTime(0.2, ctx.currentTime + 0.25);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.35);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.35);
            osc2.stop(ctx.currentTime + 0.35);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // ü™ó FISARMONICA - "Valzer Musette"
        function playAccordion() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 220;
            var melody = [
                392, 440, 494, 523, 494, 440, 392, 0,
                440, 494, 523, 587, 523, 494, 440, 0,
                392, 440, 392, 349, 330, 349, 392, 0,
                440, 392, 349, 392, 0
            ];
            var bass = [
                196, 0, 247, 0, 196, 0, 247, 0,
                220, 0, 277, 0, 220, 0, 277, 0,
                196, 0, 247, 0, 165, 0, 196, 0,
                220, 0, 175, 0, 0
            ];
            var numNotes = Math.min(melody.length, 29);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playAccordionNote(ctx, melody[idx], 0.2);
                        if (bass[idx] > 0) playAccordionNote(ctx, bass[idx], 0.12);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playAccordionNote(ctx, freq, vol) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var osc3 = ctx.createOscillator();
            var gain = ctx.createGain();
            // Fisarmonica: pi√π oscillatori leggermente stonati (chorus)
            osc.type = 'sawtooth';
            osc2.type = 'sawtooth';
            osc3.type = 'square';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 1.003;
            osc3.frequency.value = freq * 0.997;
            osc.connect(gain);
            osc2.connect(gain);
            osc3.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(vol, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.35);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc3.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.35);
            osc2.stop(ctx.currentTime + 0.35);
            osc3.stop(ctx.currentTime + 0.35);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
            activeOscillators.push(osc3);
        }

        // üéµ XILOFONO - "Twinkle Twinkle"
        function playXylophone() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 250;
            var melody = [
                523, 523, 784, 784, 880, 880, 784, 0,
                698, 698, 659, 659, 587, 587, 523, 0,
                784, 784, 698, 698, 659, 659, 587, 0,
                523, 523, 784, 784, 880, 880, 784
            ];
            var numNotes = Math.min(melody.length, 24);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playXyloNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playXyloNote(ctx, freq) {
            // Xilofono: suono metallico brillante con decay rapido
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'sine';
            osc2.type = 'sine';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 4; // armonica alta
            osc.connect(gain);
            osc2.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.35, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.4);
            osc2.stop(ctx.currentTime + 0.4);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // üé∂ ARPA - Arpeggio celestiale
        function playHarp() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 120;
            var melody = [
                262, 330, 392, 523, 659, 784, 659, 523, 392, 330,
                294, 370, 440, 587, 740, 587, 440, 370, 294,
                262, 330, 392, 523, 659, 784, 1047, 784, 659, 523, 392, 330, 262
            ];
            var numNotes = Math.min(melody.length, 50);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        playHarpNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playHarpNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            // Arpa: suono cristallino con lungo sustain
            osc.type = 'triangle';
            osc2.type = 'sine';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 2;
            filter.type = 'highpass';
            filter.frequency.value = 200;
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.25, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.8);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.8);
            osc2.stop(ctx.currentTime + 0.8);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // ‚õ™ ORGANO - "Toccata" (maestoso)
        function playOrgan() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 300;
            var melody = [
                196, 220, 247, 262, 294, 330, 294, 262,
                247, 262, 294, 330, 392, 330, 294, 262,
                196, 247, 294, 330, 392, 440, 392, 330, 294
            ];
            var numNotes = Math.min(melody.length, 20);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playOrganNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playOrganNote(ctx, freq) {
            // Organo: molte armoniche sovrapposte
            var gain = ctx.createGain();
            var harmonics = [1, 2, 3, 4, 6, 8];
            var vols = [0.2, 0.15, 0.1, 0.08, 0.05, 0.03];
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.setValueAtTime(0.3, ctx.currentTime + 0.4);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            harmonics.forEach(function(h, i) {
                var osc = ctx.createOscillator();
                osc.type = 'sine';
                osc.frequency.value = freq * h;
                var g = ctx.createGain();
                g.gain.value = vols[i];
                osc.connect(g);
                g.connect(gain);
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 0.5);
                activeOscillators.push(osc);
            });
        }

        // ü™ï BANJO - "Oh Susanna"
        function playBanjo() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 150;
            var melody = [
                392, 440, 494, 494, 523, 494, 440, 392,
                440, 494, 494, 440, 392, 440, 0, 0,
                392, 440, 494, 494, 523, 494, 440, 392,
                440, 494, 440, 392, 330, 392, 0
            ];
            var numNotes = Math.min(melody.length, 40);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playBanjoNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playBanjoNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            // Banjo: brillante e twangy
            osc.type = 'triangle';
            osc2.type = 'square';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 1.5;
            filter.type = 'bandpass';
            filter.frequency.value = 1500;
            filter.Q.value = 2;
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.2);
            osc2.stop(ctx.currentTime + 0.2);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // üìØ TUBA - Marcia bassa
        function playTuba() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 350;
            var melody = [
                98, 131, 147, 165, 147, 131, 98, 0,
                110, 147, 165, 196, 165, 147, 110, 0,
                98, 131, 98, 82, 98
            ];
            var numNotes = Math.min(melody.length, 17);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playTubaNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playTubaNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            // Tuba: ottone profondo
            osc.type = 'sawtooth';
            osc2.type = 'square';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 2;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(400, ctx.currentTime);
            filter.frequency.linearRampToValueAtTime(800, ctx.currentTime + 0.1);
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.35, ctx.currentTime + 0.08);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.5);
            osc2.stop(ctx.currentTime + 0.5);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
        }

        // ü•¢ BONGHI - Ritmo latino
        function playBongos() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 120;
            var pattern = [
                { t: 0, type: 'hi' },
                { t: 120, type: 'hi' },
                { t: 240, type: 'lo' },
                { t: 360, type: 'hi' },
                { t: 480, type: 'lo' },
                { t: 540, type: 'lo' },
                { t: 600, type: 'hi' },
                { t: 720, type: 'hi' }
            ];
            // Ripeti 5 volte per ~6 secondi
            for (var rep = 0; rep < 5; rep++) {
                pattern.forEach(function(beat) {
                    var time = beat.t + rep * 840;
                    if (time < 6000) {
                        var t = setTimeout(function() {
                            playBongoHit(ctx, beat.type);
                        }, time);
                        activeTimeouts.push(t);
                    }
                });
            }
        }
        
        function playBongoHit(ctx, type) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(type === 'hi' ? 400 : 250, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(type === 'hi' ? 200 : 100, ctx.currentTime + 0.1);
            osc.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.5, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.15);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.15);
            activeOscillators.push(osc);
        }

        // üéº ARMONICA - Blues
        function playHarmonica() {
            stopAllSounds();
            var ctx = getAudioContext();
            var tempo = 200;
            var melody = [
                392, 440, 494, 523, 494, 440, 392, 0,
                440, 392, 349, 330, 349, 392, 0, 0,
                494, 523, 587, 523, 494, 440, 392, 0,
                440, 494, 440, 392, 0
            ];
            var numNotes = Math.min(melody.length, 30);
            for (var i = 0; i < numNotes; i++) {
                (function(idx) {
                    var t = setTimeout(function() {
                        if (melody[idx] > 0) playHarmonicaNote(ctx, melody[idx]);
                    }, idx * tempo);
                    activeTimeouts.push(t);
                })(i);
            }
        }
        
        function playHarmonicaNote(ctx, freq) {
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var vibrato = ctx.createOscillator();
            var vibratoGain = ctx.createGain();
            var gain = ctx.createGain();
            // Armonica: suono nasale con vibrato
            osc.type = 'sawtooth';
            osc2.type = 'square';
            osc.frequency.value = freq;
            osc2.frequency.value = freq;
            vibrato.type = 'sine';
            vibrato.frequency.value = 8;
            vibratoGain.gain.value = 5;
            vibrato.connect(vibratoGain);
            vibratoGain.connect(osc.frequency);
            vibratoGain.connect(osc2.frequency);
            osc.connect(gain);
            osc2.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.15, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
            vibrato.start(ctx.currentTime);
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            vibrato.stop(ctx.currentTime + 0.3);
            osc.stop(ctx.currentTime + 0.3);
            osc2.stop(ctx.currentTime + 0.3);
            activeOscillators.push(osc);
            activeOscillators.push(osc2);
            activeOscillators.push(vibrato);
        }

        // üî∫ TRIANGOLO - Tintinnio ritmico
        function playTriangle() {
            stopAllSounds();
            var ctx = getAudioContext();
            var times = [0, 500, 750, 1250, 1500, 2000, 2250, 2750, 3000, 3500, 3750, 4250, 4500, 5000, 5250, 5750];
            times.forEach(function(time) {
                var t = setTimeout(function() {
                    playTriangleHit(ctx);
                }, time);
                activeTimeouts.push(t);
            });
        }
        
        function playTriangleHit(ctx) {
            // Triangolo: suono metallico brillante con molte armoniche alte
            var frequencies = [880, 1760, 2640, 3520, 4400];
            var volumes = [0.2, 0.15, 0.1, 0.08, 0.05];
            frequencies.forEach(function(freq, i) {
                var osc = ctx.createOscillator();
                var gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.value = freq;
                osc.connect(gain);
                gain.connect(ctx.destination);
                gain.gain.setValueAtTime(volumes[i], ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 1.5);
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 1.5);
                activeOscillators.push(osc);
            });
        }

        // üå¥ MARACAS - Ritmo tropicale
        function playMaracas() {
            stopAllSounds();
            var ctx = getAudioContext();
            var times = [];
            // Creo pattern ritmico di maracas (shaker)
            for (var i = 0; i < 48; i++) {
                times.push(i * 125);
            }
            times.forEach(function(time, idx) {
                if (time < 6000) {
                    var t = setTimeout(function() {
                        playMaracaShake(ctx, idx % 2 === 0 ? 0.4 : 0.25);
                    }, time);
                    activeTimeouts.push(t);
                }
            });
        }
        
        function playMaracaShake(ctx, vol) {
            // Maracas: rumore filtrato brevissimo
            var bufferSize = ctx.sampleRate * 0.06;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 5000;
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(vol, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.05);
            noise.start(ctx.currentTime);
        }

        // Suono semplice per quiz (successo)
        function playSuccess() {
            var ctx = getAudioContext();
            var notes = [523, 659, 784];
            notes.forEach(function(freq, i) {
                setTimeout(function() {
                    var osc = ctx.createOscillator();
                    var gain = ctx.createGain();
                    osc.type = 'sine';
                    osc.frequency.value = freq;
                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    gain.gain.setValueAtTime(0.3, ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
                    osc.start(ctx.currentTime);
                    osc.stop(ctx.currentTime + 0.2);
                }, i * 100);
            });
        }

        // Suono errore
        function playError() {
            var ctx = getAudioContext();
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'square';
            osc.frequency.value = 200;
            osc.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.2, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.3);
        }

        // Sblocca audio al primo tocco
        document.addEventListener('click', function() { getAudioContext(); });
        document.addEventListener('touchstart', function() { getAudioContext(); });

        // ==================== NAVIGAZIONE ====================
        let currentMeeting = 1;
        let currentActivity = null;
        let currentScore = 0;
        let currentQuestion = 0;

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goToMain() {
            showScreen('main-menu');
        }

        function goToMeeting() {
            openMeeting(currentMeeting);
        }

        function initMainMenu() {
            const grid = document.getElementById('meetings-grid');
            grid.innerHTML = Object.entries(meetings).map(([num, m]) => `
                <div class="meeting-card c${num}" onclick="openMeeting(${num})">
                    <span class="emoji">${m.emoji}</span>
                    <h2>Gioco ${num}</h2>
                    <p>${m.title}</p>
                </div>
            `).join('');
        }

        function openMeeting(n) {
            currentMeeting = n;
            const meeting = meetings[n];
            document.getElementById('meeting-title').innerHTML = `${meeting.emoji} Gioco ${n}: ${meeting.title}`;
            
            const list = document.getElementById('activity-list');
            list.innerHTML = meeting.activities.map((act, i) => `
                <div class="activity-card" onclick="startActivity(${n}, ${i})">
                    <div class="emoji">${act.emoji}</div>
                    <h3>${act.name}</h3>
                </div>
            `).join('');
            
            showScreen('meeting-menu');
        }

        function startActivity(meetingNum, activityIndex) {
            currentMeeting = meetingNum;
            currentActivity = JSON.parse(JSON.stringify(meetings[meetingNum].activities[activityIndex]));
            currentScore = 0;
            currentQuestion = 0;
            if (currentActivity.data) shuffleArray(currentActivity.data);
            
            renderActivity();
            showScreen('game-screen');
        }

        // ==================== FEEDBACK ====================
        const encourageSuccess = ["Fantastico! üåü", "Bravissimo! üëè", "Perfetto! ‚≠ê", "Grande! üí™", "Campione! üèÜ", "Super! üéâ"];
        const encourageTry = ["Riprova! üí™", "Ci sei quasi! üåà", "Non mollare! ‚≠ê", "Forza! üéØ"];

        function showFeedback(success, msg) {
            const overlay = document.getElementById('feedback-overlay');
            const box = document.getElementById('feedback-box');
            const emoji = document.getElementById('feedback-emoji');
            const text = document.getElementById('feedback-text');
            
            box.className = 'feedback-box ' + (success ? 'success' : 'error');
            emoji.textContent = success ? ['üéâ','‚≠ê','üåü','üëè','üèÜ','üí™'][Math.floor(Math.random()*6)] : 'üí™';
            text.textContent = msg;
            
            if (success) playSuccess(); else playError();
            
            overlay.classList.add('show');
            setTimeout(() => overlay.classList.remove('show'), 1100);
        }

        function getEncouragement(success) {
            const arr = success ? encourageSuccess : encourageTry;
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }

        // ==================== DATI 12 INCONTRI ====================
        const meetings = {
            // ===== INCONTRO 1: GLI ANIMALI =====
            1: {
                title: "Gli Animali",
                emoji: "üêæ",
                activities: [
                    {
                        name: "Che Animale √à?",
                        emoji: "ü¶Å",
                        type: "quiz",
                        data: [
                            { q: "üê∂", a: "Cane", wrong: ["Gatto", "Orso", "Lupo"] },
                            { q: "üê±", a: "Gatto", wrong: ["Cane", "Tigre", "Leone"] },
                            { q: "üêò", a: "Elefante", wrong: ["Ippopotamo", "Rinoceronte", "Orso"] },
                            { q: "ü¶Å", a: "Leone", wrong: ["Tigre", "Leopardo", "Gatto"] },
                            { q: "üê∏", a: "Rana", wrong: ["Rospo", "Lucertola", "Serpente"] },
                            { q: "üê¶", a: "Uccello", wrong: ["Farfalla", "Ape", "Mosca"] },
                            { q: "üêü", a: "Pesce", wrong: ["Balena", "Delfino", "Squalo"] },
                            { q: "üêª", a: "Orso", wrong: ["Gorilla", "Cane", "Lupo"] },
                            { q: "üêµ", a: "Scimmia", wrong: ["Gorilla", "Orso", "Uomo"] },
                            { q: "üê∑", a: "Maiale", wrong: ["Cinghiale", "Pecora", "Mucca"] }
                        ]
                    },
                    {
                        name: "Memory Animali",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üê∂", "üê±", "üêò", "ü¶Å", "üê∏", "üê¶"]
                    },
                    {
                        name: "Che Verso Fa?",
                        emoji: "üîä",
                        type: "quiz",
                        data: [
                            { q: "üê∂", a: "BAU BAU", wrong: ["MIAO", "MUU", "BEE"] },
                            { q: "üê±", a: "MIAO", wrong: ["BAU", "MUU", "COCCOD√à"] },
                            { q: "üêÆ", a: "MUU", wrong: ["BAU", "BEE", "CHICCHIRICH√å"] },
                            { q: "üê∑", a: "OINK OINK", wrong: ["BAU", "MUU", "MIAO"] },
                            { q: "üêî", a: "COCCOD√à", wrong: ["CHICCHIRICH√å", "MUU", "BAU"] },
                            { q: "üêì", a: "CHICCHIRICH√å", wrong: ["COCCOD√à", "BAU", "MUU"] },
                            { q: "üêë", a: "BEE", wrong: ["MUU", "BAU", "MIAO"] },
                            { q: "üê¥", a: "HIIII", wrong: ["BAU", "MUU", "BEE"] }
                        ]
                    },
                    {
                        name: "Dove Vive?",
                        emoji: "üè°",
                        type: "matching",
                        data: [
                            { item: "üêü", match: "üåä Mare" },
                            { item: "üê¶", match: "üå≥ Albero" },
                            { item: "üêÆ", match: "üè† Fattoria" },
                            { item: "ü¶Å", match: "üåø Savana" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 2: LA CASA =====
            2: {
                title: "La Casa",
                emoji: "üè†",
                activities: [
                    {
                        name: "Le Stanze",
                        emoji: "üö™",
                        type: "quiz",
                        data: [
                            { q: "üõèÔ∏è", a: "Camera da letto", wrong: ["Bagno", "Cucina", "Salotto"] },
                            { q: "üöø", a: "Bagno", wrong: ["Camera", "Cucina", "Garage"] },
                            { q: "üç≥", a: "Cucina", wrong: ["Bagno", "Camera", "Giardino"] },
                            { q: "üì∫", a: "Salotto", wrong: ["Camera", "Bagno", "Cucina"] },
                            { q: "üöó", a: "Garage", wrong: ["Cucina", "Camera", "Bagno"] },
                            { q: "üå∑", a: "Giardino", wrong: ["Salotto", "Cucina", "Camera"] }
                        ]
                    },
                    {
                        name: "Memory Oggetti",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üõãÔ∏è", "ü™ë", "üõèÔ∏è", "üì∫", "üöø", "üç≥"]
                    },
                    {
                        name: "Dove Lo Metto?",
                        emoji: "üì¶",
                        type: "sorting",
                        data: [
                            { item: "üç≥", category: "Cucina", wrong: "Bagno" },
                            { item: "üõèÔ∏è", category: "Camera", wrong: "Cucina" },
                            { item: "üöø", category: "Bagno", wrong: "Salotto" },
                            { item: "üì∫", category: "Salotto", wrong: "Bagno" },
                            { item: "ü™•", category: "Bagno", wrong: "Cucina" },
                            { item: "üçΩÔ∏è", category: "Cucina", wrong: "Camera" }
                        ]
                    },
                    {
                        name: "Cosa Faccio Qui?",
                        emoji: "ü§î",
                        type: "quiz",
                        data: [
                            { q: "üõèÔ∏è Camera", a: "Dormo", wrong: ["Cucino", "Mi lavo", "Guido"] },
                            { q: "üöø Bagno", a: "Mi lavo", wrong: ["Dormo", "Mangio", "Guardo TV"] },
                            { q: "üç≥ Cucina", a: "Cucino", wrong: ["Dormo", "Mi lavo", "Lavoro"] },
                            { q: "üì∫ Salotto", a: "Mi rilasso", wrong: ["Cucino", "Dormo", "Mi lavo"] }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 3: IL CIBO =====
            3: {
                title: "Il Cibo",
                emoji: "üçï",
                activities: [
                    {
                        name: "Frutta o Verdura?",
                        emoji: "ü•ó",
                        type: "sorting",
                        data: [
                            { item: "üçé", category: "Frutta", wrong: "Verdura" },
                            { item: "ü•ï", category: "Verdura", wrong: "Frutta" },
                            { item: "üçå", category: "Frutta", wrong: "Verdura" },
                            { item: "ü•¶", category: "Verdura", wrong: "Frutta" },
                            { item: "üçá", category: "Frutta", wrong: "Verdura" },
                            { item: "üçÖ", category: "Verdura", wrong: "Frutta" },
                            { item: "üçä", category: "Frutta", wrong: "Verdura" },
                            { item: "ü•¨", category: "Verdura", wrong: "Frutta" }
                        ]
                    },
                    {
                        name: "Memory Cibi",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üçï", "üçî", "üçé", "üç∞", "ü•ó", "üç¶"]
                    },
                    {
                        name: "Che Cibo √à?",
                        emoji: "üçΩÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "üçï", a: "Pizza", wrong: ["Pasta", "Pane", "Torta"] },
                            { q: "üçù", a: "Pasta", wrong: ["Pizza", "Riso", "Pane"] },
                            { q: "üçî", a: "Hamburger", wrong: ["Pizza", "Panino", "Hot dog"] },
                            { q: "üç¶", a: "Gelato", wrong: ["Torta", "Yogurt", "Budino"] },
                            { q: "ü•õ", a: "Latte", wrong: ["Acqua", "Succo", "Caff√®"] },
                            { q: "üçû", a: "Pane", wrong: ["Pasta", "Pizza", "Biscotto"] }
                        ]
                    },
                    {
                        name: "Sano o Goloso?",
                        emoji: "üí™",
                        type: "sorting",
                        data: [
                            { item: "üçé", category: "Sano", wrong: "Goloso" },
                            { item: "üç∞", category: "Goloso", wrong: "Sano" },
                            { item: "ü•ï", category: "Sano", wrong: "Goloso" },
                            { item: "üç´", category: "Goloso", wrong: "Sano" },
                            { item: "ü•ó", category: "Sano", wrong: "Goloso" },
                            { item: "üç≠", category: "Goloso", wrong: "Sano" },
                            { item: "üçå", category: "Sano", wrong: "Goloso" },
                            { item: "üç™", category: "Goloso", wrong: "Sano" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 4: LA NATURA =====
            4: {
                title: "La Natura",
                emoji: "üå≥",
                activities: [
                    {
                        name: "Le Stagioni",
                        emoji: "üå∏",
                        type: "quiz",
                        data: [
                            { q: "‚ùÑÔ∏èüéÑ", a: "Inverno", wrong: ["Estate", "Primavera", "Autunno"] },
                            { q: "üå∏üå∑", a: "Primavera", wrong: ["Estate", "Inverno", "Autunno"] },
                            { q: "‚òÄÔ∏èüèñÔ∏è", a: "Estate", wrong: ["Primavera", "Inverno", "Autunno"] },
                            { q: "üçÇüçÅ", a: "Autunno", wrong: ["Estate", "Inverno", "Primavera"] }
                        ]
                    },
                    {
                        name: "Che Tempo Fa?",
                        emoji: "üå§Ô∏è",
                        type: "quiz",
                        data: [
                            { q: "‚òÄÔ∏è", a: "Sole", wrong: ["Pioggia", "Neve", "Vento"] },
                            { q: "üåßÔ∏è", a: "Pioggia", wrong: ["Sole", "Neve", "Nuvole"] },
                            { q: "‚ùÑÔ∏è", a: "Neve", wrong: ["Pioggia", "Sole", "Vento"] },
                            { q: "üí®", a: "Vento", wrong: ["Pioggia", "Sole", "Neve"] },
                            { q: "‚õàÔ∏è", a: "Temporale", wrong: ["Pioggia", "Neve", "Sole"] },
                            { q: "üåà", a: "Arcobaleno", wrong: ["Sole", "Pioggia", "Nuvole"] }
                        ]
                    },
                    {
                        name: "Memory Natura",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üå∏", "üåª", "üå≥", "üçÑ", "ü¶ã", "üêù"]
                    },
                    {
                        name: "Fiore o Albero?",
                        emoji: "üå∫",
                        type: "sorting",
                        data: [
                            { item: "üå∏", category: "Fiore", wrong: "Albero" },
                            { item: "üå≥", category: "Albero", wrong: "Fiore" },
                            { item: "üå∑", category: "Fiore", wrong: "Albero" },
                            { item: "üå≤", category: "Albero", wrong: "Fiore" },
                            { item: "üåª", category: "Fiore", wrong: "Albero" },
                            { item: "üå¥", category: "Albero", wrong: "Fiore" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 5: I MESTIERI =====
            5: {
                title: "I Mestieri",
                emoji: "üë∑",
                activities: [
                    {
                        name: "Che Lavoro Fa?",
                        emoji: "üë®‚Äç‚öïÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "üë®‚Äç‚öïÔ∏è", a: "Dottore", wrong: ["Cuoco", "Pompiere", "Maestro"] },
                            { q: "üë®‚Äçüç≥", a: "Cuoco", wrong: ["Dottore", "Pompiere", "Poliziotto"] },
                            { q: "üë®‚Äçüöí", a: "Pompiere", wrong: ["Poliziotto", "Dottore", "Cuoco"] },
                            { q: "üëÆ", a: "Poliziotto", wrong: ["Pompiere", "Dottore", "Autista"] },
                            { q: "üë®‚Äçüè´", a: "Maestro", wrong: ["Dottore", "Cuoco", "Pompiere"] },
                            { q: "üë®‚Äçüåæ", a: "Contadino", wrong: ["Cuoco", "Pompiere", "Muratore"] }
                        ]
                    },
                    {
                        name: "Gli Strumenti",
                        emoji: "üîß",
                        type: "matching",
                        data: [
                            { item: "üë®‚Äç‚öïÔ∏è", match: "üíâ Siringa" },
                            { item: "üë®‚Äçüç≥", match: "üç≥ Padella" },
                            { item: "üë®‚Äçüöí", match: "üßØ Estintore" },
                            { item: "üë®‚Äçüåæ", match: "üöú Trattore" }
                        ]
                    },
                    {
                        name: "Memory Mestieri",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üë®‚Äç‚öïÔ∏è", "üë®‚Äçüç≥", "üë®‚Äçüöí", "üëÆ", "üë®‚Äçüè´", "üë®‚Äçüåæ"]
                    },
                    {
                        name: "In Citt√†",
                        emoji: "üèôÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "üè•", a: "Ospedale", wrong: ["Scuola", "Negozio", "Chiesa"] },
                            { q: "üè´", a: "Scuola", wrong: ["Ospedale", "Ufficio", "Cinema"] },
                            { q: "üè™", a: "Negozio", wrong: ["Casa", "Ospedale", "Parco"] },
                            { q: "‚õ™", a: "Chiesa", wrong: ["Scuola", "Teatro", "Museo"] },
                            { q: "üè¶", a: "Banca", wrong: ["Negozio", "Ospedale", "Scuola"] },
                            { q: "üì¨", a: "Posta", wrong: ["Banca", "Farmacia", "Bar"] }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 6: ARTE E MUSICA =====
            6: {
                title: "Arte e Musica",
                emoji: "üé®",
                activities: [
                    {
                        name: "Gli Strumenti",
                        emoji: "üéµ",
                        type: "instruments",
                        data: [
                            { emoji: "üéπ", name: "Piano", type: "piano" },
                            { emoji: "üé∏", name: "Chitarra", type: "guitar" },
                            { emoji: "ü•Å", name: "Tamburo", type: "drum" },
                            { emoji: "üé∫", name: "Tromba", type: "trumpet" },
                            { emoji: "üéª", name: "Violino", type: "violin" },
                            { emoji: "üîî", name: "Campana", type: "bell" },
                            { emoji: "üé∂", name: "Flauto", type: "flute" },
                            { emoji: "üé∑", name: "Sassofono", type: "saxophone" },
                            { emoji: "üéπ", name: "Fisarmonica", type: "accordion" },
                            { emoji: "üéµ", name: "Xilofono", type: "xylophone" },
                            { emoji: "‚ú®", name: "Arpa", type: "harp" },
                            { emoji: "‚õ™", name: "Organo", type: "organ" },
                            { emoji: "ü™ï", name: "Banjo", type: "banjo" },
                            { emoji: "üìØ", name: "Tuba", type: "tuba" },
                            { emoji: "ü•¢", name: "Bonghi", type: "bongos" },
                            { emoji: "üéº", name: "Armonica", type: "harmonica" },
                            { emoji: "üî∫", name: "Triangolo", type: "triangle" },
                            { emoji: "üå¥", name: "Maracas", type: "maracas" }
                        ]
                    },
                    {
                        name: "Suoni della Natura",
                        emoji: "üåø",
                        type: "naturesounds",
                        data: [
                            { emoji: "üåßÔ∏è", name: "Pioggia", type: "rain" },
                            { emoji: "‚õàÔ∏è", name: "Temporale", type: "thunder" },
                            { emoji: "üåä", name: "Onde", type: "waves" },
                            { emoji: "üí®", name: "Vento", type: "wind" },
                            { emoji: "üê¶", name: "Uccellini", type: "birds" },
                            { emoji: "üíß", name: "Ruscello", type: "stream" },
                            { emoji: "üî•", name: "Fuoco", type: "fire" },
                            { emoji: "ü¶ó", name: "Grilli", type: "crickets" },
                            { emoji: "üå≤", name: "Foresta", type: "forest" },
                            { emoji: "üê∏", name: "Rane", type: "frogs" },
                            { emoji: "ü¶â", name: "Gufo", type: "owl" },
                            { emoji: "üê∫", name: "Lupo", type: "wolf" }
                        ]
                    },
                    {
                        name: "I Colori",
                        emoji: "üé®",
                        type: "colors",
                        data: [
                            { name: "ROSSO", color: "#FF6B6B" },
                            { name: "ARANCIONE", color: "#FFA94D" },
                            { name: "GIALLO", color: "#FFE066" },
                            { name: "VERDE", color: "#69DB7C" },
                            { name: "AZZURRO", color: "#74C0FC" },
                            { name: "VIOLA", color: "#B197FC" },
                            { name: "ROSA", color: "#F783AC" },
                            { name: "MARRONE", color: "#A0522D" }
                        ]
                    },
                    {
                        name: "Disegna!",
                        emoji: "‚úèÔ∏è",
                        type: "drawing"
                    },
                    {
                        name: "Suona i Colori!",
                        emoji: "üé∂",
                        type: "freeplay",
                        data: [
                            { color: "#FF6B6B", note: 262, name: "DO" },
                            { color: "#FFA94D", note: 294, name: "RE" },
                            { color: "#FFE066", note: 330, name: "MI" },
                            { color: "#69DB7C", note: 349, name: "FA" },
                            { color: "#74C0FC", note: 392, name: "SOL" },
                            { color: "#B197FC", note: 440, name: "LA" },
                            { color: "#F783AC", note: 494, name: "SI" },
                            { color: "#FF8787", note: 523, name: "DO!" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 7: I TRASPORTI =====
            7: {
                title: "I Trasporti",
                emoji: "üöå",
                activities: [
                    {
                        name: "Che Mezzo √à?",
                        emoji: "üöó",
                        type: "quiz",
                        data: [
                            { q: "üöó", a: "Automobile", wrong: ["Autobus", "Treno", "Moto"] },
                            { q: "üöå", a: "Autobus", wrong: ["Auto", "Treno", "Tram"] },
                            { q: "üöÇ", a: "Treno", wrong: ["Autobus", "Metro", "Tram"] },
                            { q: "‚úàÔ∏è", a: "Aereo", wrong: ["Elicottero", "Nave", "Treno"] },
                            { q: "üö¢", a: "Nave", wrong: ["Barca", "Aereo", "Treno"] },
                            { q: "üö≤", a: "Bicicletta", wrong: ["Moto", "Monopattino", "Auto"] },
                            { q: "üèçÔ∏è", a: "Moto", wrong: ["Bicicletta", "Auto", "Scooter"] },
                            { q: "üöÅ", a: "Elicottero", wrong: ["Aereo", "Drone", "Mongolfiera"] }
                        ]
                    },
                    {
                        name: "Memory Trasporti",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üöó", "üöå", "üöÇ", "‚úàÔ∏è", "üö¢", "üö≤"]
                    },
                    {
                        name: "Terra, Mare o Cielo?",
                        emoji: "üåç",
                        type: "sorting",
                        data: [
                            { item: "üöó", category: "Terra", wrong: "Mare" },
                            { item: "üö¢", category: "Mare", wrong: "Cielo" },
                            { item: "‚úàÔ∏è", category: "Cielo", wrong: "Terra" },
                            { item: "üöÇ", category: "Terra", wrong: "Cielo" },
                            { item: "‚õµ", category: "Mare", wrong: "Terra" },
                            { item: "üöÅ", category: "Cielo", wrong: "Mare" },
                            { item: "üöå", category: "Terra", wrong: "Cielo" },
                            { item: "üõ•Ô∏è", category: "Mare", wrong: "Terra" }
                        ]
                    },
                    {
                        name: "I Segnali",
                        emoji: "üö¶",
                        type: "quiz",
                        data: [
                            { q: "üî¥", a: "STOP - Fermati!", wrong: ["Vai!", "Rallenta", "Gira"] },
                            { q: "üü¢", a: "VAI - Puoi andare!", wrong: ["Fermati!", "Aspetta", "Torna indietro"] },
                            { q: "üü°", a: "ATTENZIONE!", wrong: ["Vai veloce!", "Fermati subito", "Corri!"] },
                            { q: "üö∂", a: "Attraversa", wrong: ["Corri!", "Fermati", "Salta"] },
                            { q: "‚õî", a: "Vietato", wrong: ["Permesso", "Vai", "Entra"] },
                            { q: "üÖøÔ∏è", a: "Parcheggio", wrong: ["Divieto", "Benzina", "Uscita"] }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 8: L'ABBIGLIAMENTO =====
            8: {
                title: "L'Abbigliamento",
                emoji: "üëï",
                activities: [
                    {
                        name: "Che Vestito √à?",
                        emoji: "üëó",
                        type: "quiz",
                        data: [
                            { q: "üëï", a: "Maglietta", wrong: ["Camicia", "Maglione", "Giacca"] },
                            { q: "üëñ", a: "Pantaloni", wrong: ["Gonna", "Shorts", "Jeans"] },
                            { q: "üëó", a: "Vestito", wrong: ["Gonna", "Camicia", "Maglietta"] },
                            { q: "üß•", a: "Giacca", wrong: ["Maglione", "Camicia", "Felpa"] },
                            { q: "üëü", a: "Scarpe", wrong: ["Stivali", "Sandali", "Ciabatte"] },
                            { q: "üß¢", a: "Cappello", wrong: ["Sciarpa", "Guanti", "Cravatta"] },
                            { q: "üß£", a: "Sciarpa", wrong: ["Cappello", "Cravatta", "Cintura"] },
                            { q: "üß§", a: "Guanti", wrong: ["Calzini", "Sciarpa", "Cappello"] }
                        ]
                    },
                    {
                        name: "Memory Vestiti",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üëï", "üëñ", "üëó", "üß•", "üëü", "üß¢"]
                    },
                    {
                        name: "Estate o Inverno?",
                        emoji: "üå°Ô∏è",
                        type: "sorting",
                        data: [
                            { item: "üëô", category: "Estate", wrong: "Inverno" },
                            { item: "üß•", category: "Inverno", wrong: "Estate" },
                            { item: "ü©≥", category: "Estate", wrong: "Inverno" },
                            { item: "üß£", category: "Inverno", wrong: "Estate" },
                            { item: "ü©¥", category: "Estate", wrong: "Inverno" },
                            { item: "üß§", category: "Inverno", wrong: "Estate" },
                            { item: "üï∂Ô∏è", category: "Estate", wrong: "Inverno" },
                            { item: "üß∂", category: "Inverno", wrong: "Estate" }
                        ]
                    },
                    {
                        name: "Cosa Mi Metto?",
                        emoji: "ü§î",
                        type: "matching",
                        data: [
                            { item: "ü¶∂", match: "üëü Scarpe" },
                            { item: "‚úã", match: "üß§ Guanti" },
                            { item: "üë§", match: "üß¢ Cappello" },
                            { item: "ü¶µ", match: "üëñ Pantaloni" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 9: IL TEMPO =====
            9: {
                title: "Il Tempo",
                emoji: "üïê",
                activities: [
                    {
                        name: "I Giorni",
                        emoji: "üìÖ",
                        type: "sequence",
                        data: [
                            { items: ["Luned√¨", "Marted√¨", "Mercoled√¨"], answer: "Gioved√¨", options: ["Gioved√¨", "Venerd√¨", "Domenica", "Sabato"] },
                            { items: ["Venerd√¨", "Sabato", "Domenica"], answer: "Luned√¨", options: ["Luned√¨", "Marted√¨", "Gioved√¨", "Mercoled√¨"] },
                            { items: ["Marted√¨", "Mercoled√¨", "Gioved√¨"], answer: "Venerd√¨", options: ["Venerd√¨", "Luned√¨", "Sabato", "Domenica"] },
                            { items: ["Sabato", "Domenica", "Luned√¨"], answer: "Marted√¨", options: ["Marted√¨", "Gioved√¨", "Venerd√¨", "Mercoled√¨"] }
                        ]
                    },
                    {
                        name: "I Mesi",
                        emoji: "üóìÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "üéÑüéÖ", a: "Dicembre", wrong: ["Gennaio", "Novembre", "Febbraio"] },
                            { q: "üê£ü•ö", a: "Aprile", wrong: ["Marzo", "Maggio", "Febbraio"] },
                            { q: "üèñÔ∏è‚òÄÔ∏è", a: "Agosto", wrong: ["Luglio", "Giugno", "Settembre"] },
                            { q: "üéÉüëª", a: "Ottobre", wrong: ["Novembre", "Settembre", "Dicembre"] },
                            { q: "üíùüåπ", a: "Febbraio", wrong: ["Gennaio", "Marzo", "Maggio"] },
                            { q: "üéÜü•Ç", a: "Gennaio", wrong: ["Dicembre", "Febbraio", "Marzo"] }
                        ]
                    },
                    {
                        name: "Memory Mesi",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üéÑ", "üê£", "üèñÔ∏è", "üéÉ", "üíù", "üå∏"]
                    },
                    {
                        name: "La Giornata",
                        emoji: "‚è∞",
                        type: "sorting",
                        data: [
                            { item: "üåÖ Mi sveglio", category: "Mattina", wrong: "Sera" },
                            { item: "üç≥ Colazione", category: "Mattina", wrong: "Notte" },
                            { item: "üçù Pranzo", category: "Mezzogiorno", wrong: "Mattina" },
                            { item: "üìö Scuola", category: "Mattina", wrong: "Notte" },
                            { item: "üçï Cena", category: "Sera", wrong: "Mattina" },
                            { item: "üò¥ Dormo", category: "Notte", wrong: "Mezzogiorno" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 10: LO SPORT =====
            10: {
                title: "Lo Sport",
                emoji: "üèÉ",
                activities: [
                    {
                        name: "Che Sport √à?",
                        emoji: "‚öΩ",
                        type: "quiz",
                        data: [
                            { q: "‚öΩ", a: "Calcio", wrong: ["Basket", "Tennis", "Pallavolo"] },
                            { q: "üèÄ", a: "Basket", wrong: ["Calcio", "Pallavolo", "Rugby"] },
                            { q: "üéæ", a: "Tennis", wrong: ["Ping pong", "Badminton", "Golf"] },
                            { q: "üèä", a: "Nuoto", wrong: ["Surf", "Canoa", "Pesca"] },
                            { q: "üö¥", a: "Ciclismo", wrong: ["Corsa", "Nuoto", "Pattinaggio"] },
                            { q: "‚õ∑Ô∏è", a: "Sci", wrong: ["Pattinaggio", "Hockey", "Snowboard"] },
                            { q: "ü•ä", a: "Boxe", wrong: ["Karate", "Judo", "Wrestling"] },
                            { q: "üèÉ", a: "Corsa", wrong: ["Camminata", "Salto", "Ciclismo"] }
                        ]
                    },
                    {
                        name: "Memory Sport",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚öΩ", "üèÄ", "üéæ", "üèä", "üö¥", "‚õ∑Ô∏è"]
                    },
                    {
                        name: "Squadra o Singolo?",
                        emoji: "üë•",
                        type: "sorting",
                        data: [
                            { item: "‚öΩ", category: "Squadra", wrong: "Singolo" },
                            { item: "üéæ", category: "Singolo", wrong: "Squadra" },
                            { item: "üèÄ", category: "Squadra", wrong: "Singolo" },
                            { item: "üèä", category: "Singolo", wrong: "Squadra" },
                            { item: "üèê", category: "Squadra", wrong: "Singolo" },
                            { item: "üö¥", category: "Singolo", wrong: "Squadra" },
                            { item: "‚öæ", category: "Squadra", wrong: "Singolo" },
                            { item: "üèãÔ∏è", category: "Singolo", wrong: "Squadra" }
                        ]
                    },
                    {
                        name: "L'Attrezzatura",
                        emoji: "üéΩ",
                        type: "matching",
                        data: [
                            { item: "‚öΩ", match: "ü•Ö Porta" },
                            { item: "üéæ", match: "üéæ Racchetta" },
                            { item: "üèä", match: "ü•Ω Occhialini" },
                            { item: "‚õ∑Ô∏è", match: "üéø Sci" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 11: LA SPESA =====
            11: {
                title: "La Spesa",
                emoji: "üõí",
                activities: [
                    {
                        name: "Dove Lo Compro?",
                        emoji: "üè™",
                        type: "sorting",
                        data: [
                            { item: "üçû", category: "Panetteria", wrong: "Farmacia" },
                            { item: "üíä", category: "Farmacia", wrong: "Supermercato" },
                            { item: "ü•©", category: "Macelleria", wrong: "Edicola" },
                            { item: "üì∞", category: "Edicola", wrong: "Panetteria" },
                            { item: "üêü", category: "Pescheria", wrong: "Macelleria" },
                            { item: "üå∏", category: "Fioraio", wrong: "Farmacia" },
                            { item: "üçé", category: "Fruttivendolo", wrong: "Panetteria" },
                            { item: "üìö", category: "Libreria", wrong: "Edicola" }
                        ]
                    },
                    {
                        name: "Memory Negozi",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üè™", "üè•", "üì¨", "üè¶", "‚õΩ", "üçû"]
                    },
                    {
                        name: "I Soldi",
                        emoji: "üí∂",
                        type: "quiz",
                        data: [
                            { q: "üí∂ 5 euro", a: "Cinque", wrong: ["Dieci", "Venti", "Due"] },
                            { q: "üí∂üí∂ 10 euro", a: "Dieci", wrong: ["Cinque", "Venti", "Quindici"] },
                            { q: "ü™ôü™ôü™ô 3 monete", a: "Tre", wrong: ["Due", "Quattro", "Cinque"] },
                            { q: "üí∂üí∂üí∂üí∂ 20 euro", a: "Venti", wrong: ["Dieci", "Trenta", "Quaranta"] }
                        ]
                    },
                    {
                        name: "Quanto Costa?",
                        emoji: "üè∑Ô∏è",
                        type: "quiz",
                        data: [
                            { q: "üçï Costa 5‚Ç¨, pago con 10‚Ç¨. Resto?", a: "5 euro", wrong: ["10 euro", "15 euro", "0 euro"] },
                            { q: "üç¶ Costa 2‚Ç¨, pago con 5‚Ç¨. Resto?", a: "3 euro", wrong: ["2 euro", "5 euro", "7 euro"] },
                            { q: "üìö Costa 10‚Ç¨, pago con 20‚Ç¨. Resto?", a: "10 euro", wrong: ["20 euro", "5 euro", "30 euro"] },
                            { q: "üçé Costa 1‚Ç¨, pago con 2‚Ç¨. Resto?", a: "1 euro", wrong: ["2 euro", "3 euro", "0 euro"] }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 12: STARE INSIEME =====
            12: {
                title: "Stare Insieme",
                emoji: "ü§ù",
                activities: [
                    {
                        name: "Come Si Sente?",
                        emoji: "üòä",
                        type: "quiz",
                        data: [
                            { q: "üòä", a: "Felice", wrong: ["Triste", "Arrabbiato", "Spaventato"] },
                            { q: "üò¢", a: "Triste", wrong: ["Felice", "Arrabbiato", "Sorpreso"] },
                            { q: "üò†", a: "Arrabbiato", wrong: ["Felice", "Triste", "Stanco"] },
                            { q: "üò±", a: "Spaventato", wrong: ["Felice", "Triste", "Tranquillo"] },
                            { q: "üò¥", a: "Stanco", wrong: ["Felice", "Arrabbiato", "Spaventato"] },
                            { q: "üòÆ", a: "Sorpreso", wrong: ["Triste", "Stanco", "Arrabbiato"] },
                            { q: "ü•∞", a: "Innamorato", wrong: ["Triste", "Arrabbiato", "Spaventato"] },
                            { q: "üòé", a: "Tranquillo", wrong: ["Triste", "Arrabbiato", "Spaventato"] }
                        ]
                    },
                    {
                        name: "Memory Emozioni",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üòä", "üò¢", "üò†", "üò±", "ü•∞", "üòÆ"]
                    },
                    {
                        name: "Cosa Dico?",
                        emoji: "üí¨",
                        type: "quiz",
                        data: [
                            { q: "Quando arrivo? üëã", a: "Ciao!", wrong: ["Arrivederci", "Grazie", "Scusa"] },
                            { q: "Quando vado via? üëã", a: "Arrivederci!", wrong: ["Ciao", "Prego", "Scusa"] },
                            { q: "Quando ricevo un regalo? üéÅ", a: "Grazie!", wrong: ["Prego", "Scusa", "Ciao"] },
                            { q: "Quando faccio un errore? üòÖ", a: "Scusa!", wrong: ["Grazie", "Prego", "Ciao"] },
                            { q: "Quando qualcuno mi ringrazia?", a: "Prego!", wrong: ["Grazie", "Scusa", "Ciao"] },
                            { q: "Quando chiedo qualcosa?", a: "Per favore!", wrong: ["Grazie", "Scusa", "Prego"] }
                        ]
                    },
                    {
                        name: "Giusto o Sbagliato?",
                        emoji: "‚úÖ",
                        type: "sorting",
                        data: [
                            { item: "ü§ù Aiutare un amico", category: "Giusto", wrong: "Sbagliato" },
                            { item: "üò§ Urlare forte", category: "Sbagliato", wrong: "Giusto" },
                            { item: "üôã Alzare la mano", category: "Giusto", wrong: "Sbagliato" },
                            { item: "üëä Picchiare", category: "Sbagliato", wrong: "Giusto" },
                            { item: "üßπ Mettere in ordine", category: "Giusto", wrong: "Sbagliato" },
                            { item: "üó£Ô∏è Interrompere", category: "Sbagliato", wrong: "Giusto" },
                            { item: "ü§ó Condividere", category: "Giusto", wrong: "Sbagliato" },
                            { item: "üòà Fare i dispetti", category: "Sbagliato", wrong: "Giusto" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 13: LE STAGIONI =====
            13: {
                title: "Le Stagioni",
                emoji: "üå∏",
                activities: [
                    {
                        name: "Che Stagione √à?",
                        emoji: "üóìÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "üå∏üå∑üê£", a: "Primavera", wrong: ["Estate", "Autunno", "Inverno"] },
                            { q: "‚òÄÔ∏èüèñÔ∏èüç¶", a: "Estate", wrong: ["Primavera", "Autunno", "Inverno"] },
                            { q: "üçÇüçÅüå∞", a: "Autunno", wrong: ["Primavera", "Estate", "Inverno"] },
                            { q: "‚ùÑÔ∏è‚õÑüéø", a: "Inverno", wrong: ["Primavera", "Estate", "Autunno"] },
                            { q: "üå∫ü¶ãüåà", a: "Primavera", wrong: ["Estate", "Autunno", "Inverno"] },
                            { q: "üåäü©±üå¥", a: "Estate", wrong: ["Primavera", "Autunno", "Inverno"] }
                        ]
                    },
                    {
                        name: "Memory Stagioni",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üå∏", "‚òÄÔ∏è", "üçÇ", "‚ùÑÔ∏è", "üå∑", "üçÅ"]
                    },
                    {
                        name: "Ordine Stagioni",
                        emoji: "üìÖ",
                        type: "sequence",
                        data: [
                            { sequence: ["üå∏", "‚òÄÔ∏è", "üçÇ", "‚ùÑÔ∏è"], name: "Le 4 stagioni" },
                            { sequence: ["‚ùÑÔ∏è", "üå∏", "‚òÄÔ∏è", "üçÇ"], name: "Da Inverno" },
                            { sequence: ["‚òÄÔ∏è", "üçÇ", "‚ùÑÔ∏è", "üå∏"], name: "Da Estate" }
                        ]
                    },
                    {
                        name: "Cosa Indosso?",
                        emoji: "üëï",
                        type: "sorting",
                        data: [
                            { item: "üß• Cappotto", category: "Inverno", wrong: "Estate" },
                            { item: "üëô Costume", category: "Estate", wrong: "Inverno" },
                            { item: "üß£ Sciarpa", category: "Inverno", wrong: "Estate" },
                            { item: "ü©≥ Pantaloncini", category: "Estate", wrong: "Inverno" },
                            { item: "üß§ Guanti", category: "Inverno", wrong: "Estate" },
                            { item: "üëí Cappello paglia", category: "Estate", wrong: "Inverno" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 14: IL METEO =====
            14: {
                title: "Il Meteo",
                emoji: "‚òÄÔ∏è",
                activities: [
                    {
                        name: "Che Tempo Fa?",
                        emoji: "üå§Ô∏è",
                        type: "quiz",
                        data: [
                            { q: "‚òÄÔ∏è", a: "Sole", wrong: ["Pioggia", "Neve", "Vento"] },
                            { q: "üåßÔ∏è", a: "Pioggia", wrong: ["Sole", "Neve", "Nebbia"] },
                            { q: "‚ùÑÔ∏è", a: "Neve", wrong: ["Sole", "Pioggia", "Vento"] },
                            { q: "üí®", a: "Vento", wrong: ["Sole", "Pioggia", "Neve"] },
                            { q: "üå´Ô∏è", a: "Nebbia", wrong: ["Pioggia", "Neve", "Sole"] },
                            { q: "‚õàÔ∏è", a: "Temporale", wrong: ["Sole", "Neve", "Nebbia"] },
                            { q: "üåà", a: "Arcobaleno", wrong: ["Sole", "Pioggia", "Neve"] },
                            { q: "‚òÅÔ∏è", a: "Nuvole", wrong: ["Sole", "Pioggia", "Neve"] }
                        ]
                    },
                    {
                        name: "Memory Meteo",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚òÄÔ∏è", "üåßÔ∏è", "‚ùÑÔ∏è", "üí®", "üåà", "‚õàÔ∏è"]
                    },
                    {
                        name: "Cosa Porto?",
                        emoji: "‚òÇÔ∏è",
                        type: "matching",
                        data: [
                            { item: "üåßÔ∏è", match: "‚òÇÔ∏è Ombrello" },
                            { item: "‚òÄÔ∏è", match: "üï∂Ô∏è Occhiali" },
                            { item: "‚ùÑÔ∏è", match: "üß§ Guanti" },
                            { item: "üí®", match: "üß• Giacca" }
                        ]
                    },
                    {
                        name: "Caldo o Freddo?",
                        emoji: "üå°Ô∏è",
                        type: "sorting",
                        data: [
                            { item: "‚òÄÔ∏è Sole", category: "Caldo", wrong: "Freddo" },
                            { item: "‚ùÑÔ∏è Neve", category: "Freddo", wrong: "Caldo" },
                            { item: "üèñÔ∏è Spiaggia", category: "Caldo", wrong: "Freddo" },
                            { item: "‚õÑ Pupazzo", category: "Freddo", wrong: "Caldo" },
                            { item: "üç¶ Gelato", category: "Caldo", wrong: "Freddo" },
                            { item: "üßä Ghiaccio", category: "Freddo", wrong: "Caldo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 15: GLI INSETTI =====
            15: {
                title: "Gli Insetti",
                emoji: "ü¶ã",
                activities: [
                    {
                        name: "Che Insetto √à?",
                        emoji: "üêõ",
                        type: "quiz",
                        data: [
                            { q: "ü¶ã", a: "Farfalla", wrong: ["Ape", "Mosca", "Coccinella"] },
                            { q: "üêù", a: "Ape", wrong: ["Farfalla", "Mosca", "Formica"] },
                            { q: "üêû", a: "Coccinella", wrong: ["Ape", "Farfalla", "Ragno"] },
                            { q: "üêú", a: "Formica", wrong: ["Ape", "Mosca", "Ragno"] },
                            { q: "ü™≤", a: "Scarabeo", wrong: ["Ape", "Farfalla", "Formica"] },
                            { q: "ü¶ó", a: "Grillo", wrong: ["Formica", "Ape", "Mosca"] },
                            { q: "üêå", a: "Lumaca", wrong: ["Formica", "Bruco", "Ape"] },
                            { q: "üêõ", a: "Bruco", wrong: ["Lumaca", "Formica", "Ape"] }
                        ]
                    },
                    {
                        name: "Memory Insetti",
                        emoji: "üß†",
                        type: "memory",
                        data: ["ü¶ã", "üêù", "üêû", "üêú", "ü¶ó", "üêå"]
                    },
                    {
                        name: "Vola o Cammina?",
                        emoji: "‚úàÔ∏è",
                        type: "sorting",
                        data: [
                            { item: "ü¶ã Farfalla", category: "Vola", wrong: "Cammina" },
                            { item: "üêú Formica", category: "Cammina", wrong: "Vola" },
                            { item: "üêù Ape", category: "Vola", wrong: "Cammina" },
                            { item: "üêå Lumaca", category: "Cammina", wrong: "Vola" },
                            { item: "üêû Coccinella", category: "Vola", wrong: "Cammina" },
                            { item: "üêõ Bruco", category: "Cammina", wrong: "Vola" }
                        ]
                    },
                    {
                        name: "Da Bruco a Farfalla",
                        emoji: "üîÑ",
                        type: "sequence",
                        data: [
                            { sequence: ["ü•ö", "üêõ", "ü´õ", "ü¶ã"], name: "Metamorfosi" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 16: IL MARE =====
            16: {
                title: "Il Mare",
                emoji: "üê†",
                activities: [
                    {
                        name: "Chi Vive nel Mare?",
                        emoji: "üåä",
                        type: "quiz",
                        data: [
                            { q: "üêü", a: "Pesce", wrong: ["Gatto", "Cane", "Uccello"] },
                            { q: "üêô", a: "Polpo", wrong: ["Pesce", "Balena", "Granchio"] },
                            { q: "ü¶Ä", a: "Granchio", wrong: ["Polpo", "Pesce", "Stella"] },
                            { q: "üê¨", a: "Delfino", wrong: ["Pesce", "Polpo", "Squalo"] },
                            { q: "ü¶à", a: "Squalo", wrong: ["Delfino", "Balena", "Pesce"] },
                            { q: "üêã", a: "Balena", wrong: ["Delfino", "Squalo", "Pesce"] },
                            { q: "ü¶ë", a: "Calamaro", wrong: ["Polpo", "Pesce", "Granchio"] },
                            { q: "‚≠ê", a: "Stella Marina", wrong: ["Pesce", "Polpo", "Granchio"] }
                        ]
                    },
                    {
                        name: "Memory Mare",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üêü", "üêô", "ü¶Ä", "üê¨", "ü¶à", "üêã"]
                    },
                    {
                        name: "Al Mare Porto...",
                        emoji: "üèñÔ∏è",
                        type: "matching",
                        data: [
                            { item: "üèä", match: "üëô Costume" },
                            { item: "‚òÄÔ∏è", match: "üß¥ Crema solare" },
                            { item: "üèñÔ∏è", match: "ü™£ Secchiello" },
                            { item: "üåä", match: "ü©± Braccioli" }
                        ]
                    },
                    {
                        name: "Mare o Terra?",
                        emoji: "üåç",
                        type: "sorting",
                        data: [
                            { item: "üêü Pesce", category: "Mare", wrong: "Terra" },
                            { item: "üêï Cane", category: "Terra", wrong: "Mare" },
                            { item: "üêô Polpo", category: "Mare", wrong: "Terra" },
                            { item: "üê± Gatto", category: "Terra", wrong: "Mare" },
                            { item: "ü¶à Squalo", category: "Mare", wrong: "Terra" },
                            { item: "üêò Elefante", category: "Terra", wrong: "Mare" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 17: LA FATTORIA =====
            17: {
                title: "La Fattoria",
                emoji: "üêÑ",
                activities: [
                    {
                        name: "Animali Fattoria",
                        emoji: "üêì",
                        type: "quiz",
                        data: [
                            { q: "üêÑ", a: "Mucca", wrong: ["Cavallo", "Maiale", "Pecora"] },
                            { q: "üê∑", a: "Maiale", wrong: ["Mucca", "Pecora", "Cavallo"] },
                            { q: "üêî", a: "Gallina", wrong: ["Anatra", "Tacchino", "Oca"] },
                            { q: "üê¥", a: "Cavallo", wrong: ["Mucca", "Asino", "Maiale"] },
                            { q: "üêë", a: "Pecora", wrong: ["Capra", "Mucca", "Maiale"] },
                            { q: "üêê", a: "Capra", wrong: ["Pecora", "Mucca", "Asino"] },
                            { q: "üêá", a: "Coniglio", wrong: ["Gatto", "Cane", "Topo"] },
                            { q: "ü¶Ü", a: "Anatra", wrong: ["Gallina", "Oca", "Tacchino"] }
                        ]
                    },
                    {
                        name: "Memory Fattoria",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üêÑ", "üê∑", "üêî", "üê¥", "üêë", "üêê"]
                    },
                    {
                        name: "Cosa Ci D√†?",
                        emoji: "ü•õ",
                        type: "matching",
                        data: [
                            { item: "üêÑ", match: "ü•õ Latte" },
                            { item: "üêî", match: "ü•ö Uova" },
                            { item: "üêë", match: "üß∂ Lana" },
                            { item: "üêù", match: "üçØ Miele" }
                        ]
                    },
                    {
                        name: "Che Verso Fa?",
                        emoji: "üîä",
                        type: "quiz",
                        data: [
                            { q: "üêÑ Muuu!", a: "Mucca", wrong: ["Maiale", "Cavallo", "Pecora"] },
                            { q: "üê∑ Oink!", a: "Maiale", wrong: ["Mucca", "Cane", "Gatto"] },
                            { q: "üêî Coccod√®!", a: "Gallina", wrong: ["Anatra", "Gallo", "Oca"] },
                            { q: "üêë Beeee!", a: "Pecora", wrong: ["Capra", "Mucca", "Cavallo"] },
                            { q: "üê¥ Iiiih!", a: "Cavallo", wrong: ["Asino", "Mucca", "Maiale"] },
                            { q: "üê∂ Bau!", a: "Cane", wrong: ["Gatto", "Lupo", "Volpe"] }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 18: LO SPAZIO =====
            18: {
                title: "Lo Spazio",
                emoji: "üöÄ",
                activities: [
                    {
                        name: "Nello Spazio",
                        emoji: "üåü",
                        type: "quiz",
                        data: [
                            { q: "üåç", a: "Terra", wrong: ["Luna", "Sole", "Marte"] },
                            { q: "üåô", a: "Luna", wrong: ["Sole", "Terra", "Stella"] },
                            { q: "‚òÄÔ∏è", a: "Sole", wrong: ["Luna", "Stella", "Terra"] },
                            { q: "‚≠ê", a: "Stella", wrong: ["Luna", "Sole", "Pianeta"] },
                            { q: "üöÄ", a: "Razzo", wrong: ["Aereo", "Elicottero", "Auto"] },
                            { q: "üë®‚ÄçüöÄ", a: "Astronauta", wrong: ["Pilota", "Pompiere", "Dottore"] },
                            { q: "üõ∏", a: "UFO", wrong: ["Razzo", "Aereo", "Satellite"] },
                            { q: "üåå", a: "Galassia", wrong: ["Stella", "Pianeta", "Luna"] }
                        ]
                    },
                    {
                        name: "Memory Spazio",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üåç", "üåô", "‚òÄÔ∏è", "‚≠ê", "üöÄ", "üë®‚ÄçüöÄ"]
                    },
                    {
                        name: "Pianeti in Ordine",
                        emoji: "ü™ê",
                        type: "sequence",
                        data: [
                            { sequence: ["‚òÄÔ∏è", "üü§", "üü°", "üåç", "üî¥"], name: "Dal Sole" },
                            { sequence: ["üåë", "üåí", "üåì", "üåî", "üåï"], name: "Fasi Luna" }
                        ]
                    },
                    {
                        name: "Grande o Piccolo?",
                        emoji: "üìè",
                        type: "sorting",
                        data: [
                            { item: "‚òÄÔ∏è Sole", category: "Grande", wrong: "Piccolo" },
                            { item: "üåô Luna", category: "Piccolo", wrong: "Grande" },
                            { item: "üåç Terra", category: "Grande", wrong: "Piccolo" },
                            { item: "‚≠ê Stella", category: "Piccolo", wrong: "Grande" },
                            { item: "üåå Galassia", category: "Grande", wrong: "Piccolo" },
                            { item: "üöÄ Razzo", category: "Piccolo", wrong: "Grande" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 19: I DINOSAURI =====
            19: {
                title: "I Dinosauri",
                emoji: "ü¶ï",
                activities: [
                    {
                        name: "Che Dinosauro √à?",
                        emoji: "ü¶ñ",
                        type: "quiz",
                        data: [
                            { q: "ü¶ï", a: "Brontosauro", wrong: ["T-Rex", "Triceratopo", "Stegosauro"] },
                            { q: "ü¶ñ", a: "T-Rex", wrong: ["Brontosauro", "Triceratopo", "Velociraptor"] },
                            { q: "üî∫ü¶ï", a: "Triceratopo", wrong: ["T-Rex", "Stegosauro", "Brontosauro"] },
                            { q: "ü¶¥", a: "Fossile", wrong: ["Uovo", "Roccia", "Pietra"] }
                        ]
                    },
                    {
                        name: "Memory Dinosauri",
                        emoji: "üß†",
                        type: "memory",
                        data: ["ü¶ï", "ü¶ñ", "ü•ö", "ü¶¥", "üåã", "üåø"]
                    },
                    {
                        name: "Cosa Mangia?",
                        emoji: "üçñ",
                        type: "sorting",
                        data: [
                            { item: "ü¶ñ T-Rex", category: "Carne", wrong: "Piante" },
                            { item: "ü¶ï Brontosauro", category: "Piante", wrong: "Carne" },
                            { item: "üî∫ Triceratopo", category: "Piante", wrong: "Carne" },
                            { item: "üèÉ Velociraptor", category: "Carne", wrong: "Piante" }
                        ]
                    },
                    {
                        name: "Grande o Piccolo?",
                        emoji: "üìè",
                        type: "sorting",
                        data: [
                            { item: "ü¶ï Brontosauro", category: "Grande", wrong: "Piccolo" },
                            { item: "ü¶é Compsognato", category: "Piccolo", wrong: "Grande" },
                            { item: "ü¶ñ T-Rex", category: "Grande", wrong: "Piccolo" },
                            { item: "ü•ö Uovo dino", category: "Piccolo", wrong: "Grande" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 20: LE FORME =====
            20: {
                title: "Le Forme",
                emoji: "üî∑",
                activities: [
                    {
                        name: "Che Forma √à?",
                        emoji: "‚¨õ",
                        type: "quiz",
                        data: [
                            { q: "‚≠ï", a: "Cerchio", wrong: ["Quadrato", "Triangolo", "Rettangolo"] },
                            { q: "‚¨õ", a: "Quadrato", wrong: ["Cerchio", "Triangolo", "Stella"] },
                            { q: "üî∫", a: "Triangolo", wrong: ["Cerchio", "Quadrato", "Cuore"] },
                            { q: "‚¨ú", a: "Rettangolo", wrong: ["Quadrato", "Cerchio", "Triangolo"] },
                            { q: "‚≠ê", a: "Stella", wrong: ["Cerchio", "Cuore", "Quadrato"] },
                            { q: "‚ù§Ô∏è", a: "Cuore", wrong: ["Cerchio", "Stella", "Triangolo"] },
                            { q: "üíé", a: "Diamante", wrong: ["Quadrato", "Triangolo", "Cerchio"] },
                            { q: "üî∂", a: "Rombo", wrong: ["Quadrato", "Triangolo", "Cerchio"] }
                        ]
                    },
                    {
                        name: "Memory Forme",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚≠ï", "‚¨õ", "üî∫", "‚≠ê", "‚ù§Ô∏è", "üî∂"]
                    },
                    {
                        name: "Quanti Lati?",
                        emoji: "üìê",
                        type: "quiz",
                        data: [
                            { q: "üî∫ Triangolo", a: "3 lati", wrong: ["4 lati", "5 lati", "0 lati"] },
                            { q: "‚¨õ Quadrato", a: "4 lati", wrong: ["3 lati", "5 lati", "6 lati"] },
                            { q: "‚≠ï Cerchio", a: "0 lati", wrong: ["1 lato", "2 lati", "4 lati"] },
                            { q: "‚¨° Esagono", a: "6 lati", wrong: ["4 lati", "5 lati", "8 lati"] }
                        ]
                    },
                    {
                        name: "Forme Intorno a Noi",
                        emoji: "üëÄ",
                        type: "matching",
                        data: [
                            { item: "üçï", match: "üî∫ Triangolo" },
                            { item: "‚öΩ", match: "‚≠ï Cerchio" },
                            { item: "üì∫", match: "‚¨ú Rettangolo" },
                            { item: "ü™Å", match: "üî∂ Rombo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 21: GLI OPPOSTI =====
            21: {
                title: "Gli Opposti",
                emoji: "‚¨ÜÔ∏è",
                activities: [
                    {
                        name: "Qual √® l'Opposto?",
                        emoji: "üîÑ",
                        type: "quiz",
                        data: [
                            { q: "‚¨ÜÔ∏è Alto", a: "Basso", wrong: ["Grande", "Lungo", "Veloce"] },
                            { q: "üî• Caldo", a: "Freddo", wrong: ["Tiepido", "Secco", "Umido"] },
                            { q: "üêò Grande", a: "Piccolo", wrong: ["Medio", "Alto", "Largo"] },
                            { q: "üêá Veloce", a: "Lento", wrong: ["Fermo", "Corto", "Basso"] },
                            { q: "üòä Felice", a: "Triste", wrong: ["Arrabbiato", "Stanco", "Sorpreso"] },
                            { q: "‚òÄÔ∏è Giorno", a: "Notte", wrong: ["Sera", "Mattina", "Pomeriggio"] },
                            { q: "üìñ Aperto", a: "Chiuso", wrong: ["Mezzo", "Largo", "Stretto"] },
                            { q: "üí° Acceso", a: "Spento", wrong: ["Rotto", "Nuovo", "Vecchio"] }
                        ]
                    },
                    {
                        name: "Memory Opposti",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚¨ÜÔ∏è", "‚¨áÔ∏è", "üî•", "‚ùÑÔ∏è", "‚òÄÔ∏è", "üåô"]
                    },
                    {
                        name: "Abbina gli Opposti",
                        emoji: "üîó",
                        type: "matching",
                        data: [
                            { item: "‚¨ÜÔ∏è Alto", match: "‚¨áÔ∏è Basso" },
                            { item: "üî• Caldo", match: "‚ùÑÔ∏è Freddo" },
                            { item: "‚òÄÔ∏è Giorno", match: "üåô Notte" },
                            { item: "üòä Felice", match: "üò¢ Triste" }
                        ]
                    },
                    {
                        name: "Grande o Piccolo?",
                        emoji: "üìè",
                        type: "sorting",
                        data: [
                            { item: "üêò Elefante", category: "Grande", wrong: "Piccolo" },
                            { item: "üêú Formica", category: "Piccolo", wrong: "Grande" },
                            { item: "üè† Casa", category: "Grande", wrong: "Piccolo" },
                            { item: "üîë Chiave", category: "Piccolo", wrong: "Grande" },
                            { item: "üö¢ Nave", category: "Grande", wrong: "Piccolo" },
                            { item: "üêû Coccinella", category: "Piccolo", wrong: "Grande" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 22: LA NATURA =====
            22: {
                title: "La Natura",
                emoji: "üå≥",
                activities: [
                    {
                        name: "Cosa Vedi?",
                        emoji: "üå≤",
                        type: "quiz",
                        data: [
                            { q: "üå≥", a: "Albero", wrong: ["Fiore", "Erba", "Cespuglio"] },
                            { q: "üå∏", a: "Fiore", wrong: ["Albero", "Foglia", "Frutto"] },
                            { q: "üçÉ", a: "Foglia", wrong: ["Fiore", "Ramo", "Radice"] },
                            { q: "‚õ∞Ô∏è", a: "Montagna", wrong: ["Collina", "Vulcano", "Roccia"] },
                            { q: "üåä", a: "Onda", wrong: ["Fiume", "Lago", "Pioggia"] },
                            { q: "üåª", a: "Girasole", wrong: ["Rosa", "Tulipano", "Margherita"] },
                            { q: "üçÑ", a: "Fungo", wrong: ["Fiore", "Albero", "Foglia"] },
                            { q: "üåµ", a: "Cactus", wrong: ["Palma", "Pino", "Quercia"] }
                        ]
                    },
                    {
                        name: "Memory Natura",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üå≥", "üå∏", "üçÉ", "‚õ∞Ô∏è", "üåª", "üçÑ"]
                    },
                    {
                        name: "Di Che Colore?",
                        emoji: "üé®",
                        type: "matching",
                        data: [
                            { item: "üå≥", match: "üü¢ Verde" },
                            { item: "‚òÄÔ∏è", match: "üü° Giallo" },
                            { item: "üåä", match: "üîµ Blu" },
                            { item: "üçÇ", match: "üü§ Marrone" }
                        ]
                    },
                    {
                        name: "Fiore o Albero?",
                        emoji: "üå≤",
                        type: "sorting",
                        data: [
                            { item: "üå≥ Quercia", category: "Albero", wrong: "Fiore" },
                            { item: "üåπ Rosa", category: "Fiore", wrong: "Albero" },
                            { item: "üå≤ Pino", category: "Albero", wrong: "Fiore" },
                            { item: "üå∑ Tulipano", category: "Fiore", wrong: "Albero" },
                            { item: "üå¥ Palma", category: "Albero", wrong: "Fiore" },
                            { item: "üåª Girasole", category: "Fiore", wrong: "Albero" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 23: I DOLCI =====
            23: {
                title: "I Dolci",
                emoji: "üç∞",
                activities: [
                    {
                        name: "Che Dolce √à?",
                        emoji: "üßÅ",
                        type: "quiz",
                        data: [
                            { q: "üç∞", a: "Torta", wrong: ["Biscotto", "Gelato", "Cioccolato"] },
                            { q: "üç¶", a: "Gelato", wrong: ["Torta", "Caramella", "Muffin"] },
                            { q: "üç™", a: "Biscotto", wrong: ["Torta", "Gelato", "Pane"] },
                            { q: "üç´", a: "Cioccolato", wrong: ["Biscotto", "Torta", "Caramella"] },
                            { q: "üç¨", a: "Caramella", wrong: ["Cioccolato", "Gelato", "Torta"] },
                            { q: "üç©", a: "Ciambella", wrong: ["Biscotto", "Torta", "Muffin"] },
                            { q: "üßÅ", a: "Cupcake", wrong: ["Torta", "Biscotto", "Gelato"] },
                            { q: "üç≠", a: "Lecca lecca", wrong: ["Caramella", "Gelato", "Cioccolato"] }
                        ]
                    },
                    {
                        name: "Memory Dolci",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üç∞", "üç¶", "üç™", "üç´", "üç¨", "üç©"]
                    },
                    {
                        name: "Caldo o Freddo?",
                        emoji: "üå°Ô∏è",
                        type: "sorting",
                        data: [
                            { item: "üç¶ Gelato", category: "Freddo", wrong: "Caldo" },
                            { item: "‚òï Cioccolata", category: "Caldo", wrong: "Freddo" },
                            { item: "üßä Ghiacciolo", category: "Freddo", wrong: "Caldo" },
                            { item: "ü•ê Cornetto", category: "Caldo", wrong: "Freddo" },
                            { item: "üç® Coppa gelato", category: "Freddo", wrong: "Caldo" },
                            { item: "üç™ Biscotto forno", category: "Caldo", wrong: "Freddo" }
                        ]
                    },
                    {
                        name: "Per la Festa!",
                        emoji: "üéÇ",
                        type: "matching",
                        data: [
                            { item: "üéÇ", match: "üéà Compleanno" },
                            { item: "ü•öüç´", match: "üê∞ Pasqua" },
                            { item: "üéÑüç™", match: "üéÖ Natale" },
                            { item: "üç¨üëª", match: "üéÉ Halloween" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 24: LE FESTE =====
            24: {
                title: "Le Feste",
                emoji: "üéÑ",
                activities: [
                    {
                        name: "Che Festa √à?",
                        emoji: "üéâ",
                        type: "quiz",
                        data: [
                            { q: "üéÑüéÖ", a: "Natale", wrong: ["Pasqua", "Halloween", "Carnevale"] },
                            { q: "üê∞ü•ö", a: "Pasqua", wrong: ["Natale", "Halloween", "Compleanno"] },
                            { q: "üéÉüëª", a: "Halloween", wrong: ["Natale", "Pasqua", "Carnevale"] },
                            { q: "üéÇüéà", a: "Compleanno", wrong: ["Natale", "Pasqua", "Capodanno"] },
                            { q: "üé≠üéä", a: "Carnevale", wrong: ["Halloween", "Natale", "Pasqua"] },
                            { q: "üéÜü•Ç", a: "Capodanno", wrong: ["Natale", "Compleanno", "Carnevale"] },
                            { q: "‚ù§Ô∏èüåπ", a: "San Valentino", wrong: ["Compleanno", "Natale", "Pasqua"] },
                            { q: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶üçù", a: "Domenica", wrong: ["Natale", "Pasqua", "Compleanno"] }
                        ]
                    },
                    {
                        name: "Memory Feste",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üéÑ", "üê∞", "üéÉ", "üéÇ", "üé≠", "üéÜ"]
                    },
                    {
                        name: "Cosa Si Usa?",
                        emoji: "üéÅ",
                        type: "matching",
                        data: [
                            { item: "üéÑ Natale", match: "üéÅ Regali" },
                            { item: "üéÇ Compleanno", match: "üéà Palloncini" },
                            { item: "üéÉ Halloween", match: "üëª Costumi" },
                            { item: "üê∞ Pasqua", match: "ü•ö Uova" }
                        ]
                    },
                    {
                        name: "Quando Si Festeggia?",
                        emoji: "üìÖ",
                        type: "sorting",
                        data: [
                            { item: "üéÑ Natale", category: "Inverno", wrong: "Estate" },
                            { item: "üê∞ Pasqua", category: "Primavera", wrong: "Autunno" },
                            { item: "üéÉ Halloween", category: "Autunno", wrong: "Primavera" },
                            { item: "üèñÔ∏è Ferragosto", category: "Estate", wrong: "Inverno" },
                            { item: "üéÜ Capodanno", category: "Inverno", wrong: "Estate" },
                            { item: "üé≠ Carnevale", category: "Inverno", wrong: "Estate" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 25: I GIOCATTOLI =====
            25: {
                title: "I Giocattoli",
                emoji: "üß∏",
                activities: [
                    {
                        name: "Che Gioco √à?",
                        emoji: "üéÆ",
                        type: "quiz",
                        data: [
                            { q: "üß∏", a: "Orsetto", wrong: ["Bambola", "Palla", "Macchina"] },
                            { q: "üéà", a: "Palloncino", wrong: ["Palla", "Aquilone", "Bolla"] },
                            { q: "‚öΩ", a: "Pallone", wrong: ["Palloncino", "Frisbee", "Aquilone"] },
                            { q: "ü™Å", a: "Aquilone", wrong: ["Palloncino", "Aereo", "Farfalla"] },
                            { q: "üé≤", a: "Dadi", wrong: ["Puzzle", "Carte", "Domino"] },
                            { q: "üß©", a: "Puzzle", wrong: ["Dadi", "Lego", "Carte"] },
                            { q: "ü™Ä", a: "Yo-Yo", wrong: ["Trottola", "Palla", "Frisbee"] },
                            { q: "üéØ", a: "Freccette", wrong: ["Bersaglio", "Arco", "Palla"] }
                        ]
                    },
                    {
                        name: "Memory Giocattoli",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üß∏", "üéà", "‚öΩ", "ü™Å", "üé≤", "üß©"]
                    },
                    {
                        name: "Dentro o Fuori?",
                        emoji: "üè†",
                        type: "sorting",
                        data: [
                            { item: "üß© Puzzle", category: "Dentro", wrong: "Fuori" },
                            { item: "ü™Å Aquilone", category: "Fuori", wrong: "Dentro" },
                            { item: "üé≤ Dadi", category: "Dentro", wrong: "Fuori" },
                            { item: "‚öΩ Pallone", category: "Fuori", wrong: "Dentro" },
                            { item: "üß∏ Peluche", category: "Dentro", wrong: "Fuori" },
                            { item: "üö≤ Bici", category: "Fuori", wrong: "Dentro" }
                        ]
                    },
                    {
                        name: "Con Chi Gioco?",
                        emoji: "üë´",
                        type: "sorting",
                        data: [
                            { item: "‚öΩ Calcio", category: "Insieme", wrong: "Da solo" },
                            { item: "üìñ Leggere", category: "Da solo", wrong: "Insieme" },
                            { item: "üé≤ Gioco tavolo", category: "Insieme", wrong: "Da solo" },
                            { item: "üé® Colorare", category: "Da solo", wrong: "Insieme" },
                            { item: "üèÉ Rincorrersi", category: "Insieme", wrong: "Da solo" },
                            { item: "üß© Puzzle", category: "Da solo", wrong: "Insieme" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 26: IL CIRCO =====
            26: {
                title: "Il Circo",
                emoji: "üé™",
                activities: [
                    {
                        name: "Al Circo!",
                        emoji: "ü§°",
                        type: "quiz",
                        data: [
                            { q: "ü§°", a: "Pagliaccio", wrong: ["Mago", "Acrobata", "Domatore"] },
                            { q: "üé©‚ú®", a: "Mago", wrong: ["Pagliaccio", "Giocoliere", "Acrobata"] },
                            { q: "ü§∏", a: "Acrobata", wrong: ["Pagliaccio", "Mago", "Domatore"] },
                            { q: "ü¶Åüë®", a: "Domatore", wrong: ["Mago", "Pagliaccio", "Giocoliere"] },
                            { q: "üé™", a: "Tendone", wrong: ["Casa", "Teatro", "Cinema"] },
                            { q: "üé†", a: "Giostra", wrong: ["Altalena", "Scivolo", "Ruota"] }
                        ]
                    },
                    {
                        name: "Memory Circo",
                        emoji: "üß†",
                        type: "memory",
                        data: ["ü§°", "üé©", "ü§∏", "ü¶Å", "üé™", "üé†"]
                    },
                    {
                        name: "Animali del Circo",
                        emoji: "üêò",
                        type: "quiz",
                        data: [
                            { q: "üêò", a: "Elefante", wrong: ["Leone", "Tigre", "Orso"] },
                            { q: "ü¶Å", a: "Leone", wrong: ["Tigre", "Orso", "Scimmia"] },
                            { q: "üêª", a: "Orso", wrong: ["Leone", "Gorilla", "Elefante"] },
                            { q: "ü¶≠", a: "Foca", wrong: ["Delfino", "Pinguino", "Balena"] },
                            { q: "üêí", a: "Scimmia", wrong: ["Orso", "Leone", "Elefante"] },
                            { q: "üêé", a: "Cavallo", wrong: ["Zebra", "Asino", "Pony"] }
                        ]
                    },
                    {
                        name: "Cosa Fa?",
                        emoji: "üé≠",
                        type: "matching",
                        data: [
                            { item: "ü§°", match: "üòÇ Fa ridere" },
                            { item: "üé©", match: "‚ú® Fa magie" },
                            { item: "ü§∏", match: "üîÑ Fa salti" },
                            { item: "üé∫", match: "üéµ Suona" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 27: LE FIABE =====
            27: {
                title: "Le Fiabe",
                emoji: "üè∞",
                activities: [
                    {
                        name: "Chi √à?",
                        emoji: "üë∏",
                        type: "quiz",
                        data: [
                            { q: "üë∏üè∞", a: "Principessa", wrong: ["Regina", "Fata", "Strega"] },
                            { q: "ü§¥‚öîÔ∏è", a: "Principe", wrong: ["Re", "Cavaliere", "Mago"] },
                            { q: "üßô‚Äç‚ôÇÔ∏è‚ú®", a: "Mago", wrong: ["Strega", "Fata", "Gnomo"] },
                            { q: "üßö‚ú®", a: "Fata", wrong: ["Strega", "Principessa", "Sirena"] },
                            { q: "üê≤üî•", a: "Drago", wrong: ["Dinosauro", "Serpente", "Mostro"] },
                            { q: "ü¶Ñüåà", a: "Unicorno", wrong: ["Cavallo", "Pegaso", "Pony"] },
                            { q: "üëπ", a: "Orco", wrong: ["Gigante", "Mostro", "Troll"] },
                            { q: "üßú‚Äç‚ôÄÔ∏èüåä", a: "Sirena", wrong: ["Fata", "Principessa", "Ninfa"] }
                        ]
                    },
                    {
                        name: "Memory Fiabe",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üë∏", "ü§¥", "üßô‚Äç‚ôÇÔ∏è", "üßö", "üê≤", "ü¶Ñ"]
                    },
                    {
                        name: "Buono o Cattivo?",
                        emoji: "üòá",
                        type: "sorting",
                        data: [
                            { item: "üë∏ Principessa", category: "Buono", wrong: "Cattivo" },
                            { item: "üßô‚Äç‚ôÄÔ∏è Strega", category: "Cattivo", wrong: "Buono" },
                            { item: "üßö Fata", category: "Buono", wrong: "Cattivo" },
                            { item: "üê∫ Lupo cattivo", category: "Cattivo", wrong: "Buono" },
                            { item: "ü§¥ Principe", category: "Buono", wrong: "Cattivo" },
                            { item: "üëπ Orco", category: "Cattivo", wrong: "Buono" }
                        ]
                    },
                    {
                        name: "Di Che Fiaba?",
                        emoji: "üìñ",
                        type: "matching",
                        data: [
                            { item: "üë†", match: "üë∏ Cenerentola" },
                            { item: "üçé", match: "‚ùÑÔ∏è Biancaneve" },
                            { item: "üê∫", match: "üî¥ Cappuccetto" },
                            { item: "ü•æ", match: "üê± Gatto Stivali" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 28: IL CINEMA =====
            28: {
                title: "Il Cinema",
                emoji: "üé¨",
                activities: [
                    {
                        name: "Al Cinema!",
                        emoji: "üçø",
                        type: "quiz",
                        data: [
                            { q: "üé¨", a: "Ciak", wrong: ["Cinema", "TV", "Fotocamera"] },
                            { q: "üçø", a: "Popcorn", wrong: ["Patatine", "Caramelle", "Gelato"] },
                            { q: "üé•", a: "Cinepresa", wrong: ["TV", "Radio", "Telefono"] },
                            { q: "üìΩÔ∏è", a: "Proiettore", wrong: ["TV", "Computer", "Lampada"] },
                            { q: "üé≠", a: "Attori", wrong: ["Cantanti", "Ballerini", "Musicisti"] },
                            { q: "üéüÔ∏è", a: "Biglietto", wrong: ["Soldi", "Carta", "Foglio"] }
                        ]
                    },
                    {
                        name: "Memory Cinema",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üé¨", "üçø", "üé•", "üé≠", "üéüÔ∏è", "üìΩÔ∏è"]
                    },
                    {
                        name: "Che Film √à?",
                        emoji: "üéûÔ∏è",
                        type: "matching",
                        data: [
                            { item: "ü¶Åüëë", match: "üåç Re Leone" },
                            { item: "‚ùÑÔ∏èüë∏", match: "‚õÑ Frozen" },
                            { item: "üß∏ü§†", match: "üöÄ Toy Story" },
                            { item: "üßú‚Äç‚ôÄÔ∏èüåä", match: "üêö Sirenetta" }
                        ]
                    },
                    {
                        name: "Film o Cartone?",
                        emoji: "üì∫",
                        type: "sorting",
                        data: [
                            { item: "ü¶Å Re Leone", category: "Cartone", wrong: "Film" },
                            { item: "ü¶∏ Supereroi", category: "Film", wrong: "Cartone" },
                            { item: "üß∏ Toy Story", category: "Cartone", wrong: "Film" },
                            { item: "ü¶ñ Jurassic Park", category: "Film", wrong: "Cartone" },
                            { item: "üßû Aladdin", category: "Cartone", wrong: "Film" },
                            { item: "üï∑Ô∏è Spider-Man", category: "Film", wrong: "Cartone" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 29: I PAESI =====
            29: {
                title: "I Paesi",
                emoji: "üåç",
                activities: [
                    {
                        name: "Che Paese √à?",
                        emoji: "üó∫Ô∏è",
                        type: "quiz",
                        data: [
                            { q: "üáÆüáπüçï", a: "Italia", wrong: ["Francia", "Spagna", "Germania"] },
                            { q: "üá´üá∑üóº", a: "Francia", wrong: ["Italia", "Inghilterra", "Spagna"] },
                            { q: "üá∫üá∏üóΩ", a: "America", wrong: ["Inghilterra", "Canada", "Australia"] },
                            { q: "üáØüáµüóª", a: "Giappone", wrong: ["Cina", "Corea", "India"] },
                            { q: "üá¨üáßüëë", a: "Inghilterra", wrong: ["Francia", "Germania", "Italia"] },
                            { q: "üá™üá¨üèõÔ∏è", a: "Egitto", wrong: ["Grecia", "Italia", "Marocco"] }
                        ]
                    },
                    {
                        name: "Memory Paesi",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üáÆüáπ", "üá´üá∑", "üá∫üá∏", "üáØüáµ", "üá¨üáß", "üá™üá¨"]
                    },
                    {
                        name: "Cosa Si Mangia?",
                        emoji: "üçù",
                        type: "matching",
                        data: [
                            { item: "üáÆüáπ Italia", match: "üçï Pizza" },
                            { item: "üáØüáµ Giappone", match: "üç£ Sushi" },
                            { item: "üá∫üá∏ America", match: "üçî Hamburger" },
                            { item: "üá≤üáΩ Messico", match: "üåÆ Taco" }
                        ]
                    },
                    {
                        name: "Caldo o Freddo?",
                        emoji: "üå°Ô∏è",
                        type: "sorting",
                        data: [
                            { item: "üèùÔ∏è Hawaii", category: "Caldo", wrong: "Freddo" },
                            { item: "üáÆüá∏ Islanda", category: "Freddo", wrong: "Caldo" },
                            { item: "üá™üá¨ Egitto", category: "Caldo", wrong: "Freddo" },
                            { item: "üá≥üá¥ Norvegia", category: "Freddo", wrong: "Caldo" },
                            { item: "üáßüá∑ Brasile", category: "Caldo", wrong: "Freddo" },
                            { item: "üá∑üá∫ Russia", category: "Freddo", wrong: "Caldo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 30: I SUONI =====
            30: {
                title: "I Suoni",
                emoji: "üîä",
                activities: [
                    {
                        name: "Che Suono √à?",
                        emoji: "üëÇ",
                        type: "quiz",
                        data: [
                            { q: "üêï Bau bau!", a: "Cane", wrong: ["Gatto", "Lupo", "Volpe"] },
                            { q: "üê± Miao!", a: "Gatto", wrong: ["Cane", "Tigre", "Leone"] },
                            { q: "üêì Chicchirich√¨!", a: "Gallo", wrong: ["Gallina", "Anatra", "Oca"] },
                            { q: "üöó Brum brum!", a: "Auto", wrong: ["Treno", "Aereo", "Moto"] },
                            { q: "‚è∞ Drin drin!", a: "Sveglia", wrong: ["Telefono", "Campanello", "Campana"] },
                            { q: "üíß Glu glu!", a: "Acqua", wrong: ["Pioggia", "Fiume", "Mare"] },
                            { q: "üêù Bzzzz!", a: "Ape", wrong: ["Mosca", "Zanzara", "Vespa"] },
                            { q: "üöÇ Ciuf ciuf!", a: "Treno", wrong: ["Auto", "Nave", "Aereo"] }
                        ]
                    },
                    {
                        name: "Memory Suoni",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üêï", "üê±", "üêì", "üöó", "‚è∞", "üêù"]
                    },
                    {
                        name: "Forte o Piano?",
                        emoji: "üì¢",
                        type: "sorting",
                        data: [
                            { item: "ü¶Å Ruggito", category: "Forte", wrong: "Piano" },
                            { item: "üê≠ Squittio", category: "Piano", wrong: "Forte" },
                            { item: "‚õàÔ∏è Tuono", category: "Forte", wrong: "Piano" },
                            { item: "üçÉ Foglie", category: "Piano", wrong: "Forte" },
                            { item: "üöí Sirena", category: "Forte", wrong: "Piano" },
                            { item: "üêà Fusa", category: "Piano", wrong: "Forte" }
                        ]
                    },
                    {
                        name: "Chi Fa Questo Suono?",
                        emoji: "‚ùì",
                        type: "matching",
                        data: [
                            { item: "Muuuu!", match: "üêÑ Mucca" },
                            { item: "Cip cip!", match: "üê§ Pulcino" },
                            { item: "Sssss!", match: "üêç Serpente" },
                            { item: "Grrr!", match: "üêª Orso" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 31: I PUZZLE =====
            31: {
                title: "I Puzzle",
                emoji: "üß©",
                activities: [
                    {
                        name: "Cosa Manca?",
                        emoji: "‚ùì",
                        type: "quiz",
                        data: [
                            { q: "üçéüçäüçã‚ùì", a: "üçá Uva", wrong: ["ü•ï Carota", "ü•¶ Broccoli", "üßÄ Formaggio"] },
                            { q: "üê∂üê±üê∞‚ùì", a: "üêπ Criceto", wrong: ["ü¶Å Leone", "üêò Elefante", "üêä Coccodrillo"] },
                            { q: "1Ô∏è‚É£2Ô∏è‚É£3Ô∏è‚É£‚ùì", a: "4Ô∏è‚É£", wrong: ["5Ô∏è‚É£", "6Ô∏è‚É£", "0Ô∏è‚É£"] },
                            { q: "üî¥üü†üü°‚ùì", a: "üü¢ Verde", wrong: ["üîµ Blu", "‚ö´ Nero", "‚ö™ Bianco"] },
                            { q: "üë∂üßíüßë‚ùì", a: "üë¥ Nonno", wrong: ["üë∂ Beb√®", "üßí Bambino", "üêï Cane"] },
                            { q: "‚≠ê‚≠ê‚≠ê‚ùì", a: "‚≠ê Stella", wrong: ["üåô Luna", "‚òÄÔ∏è Sole", "üåç Terra"] }
                        ]
                    },
                    {
                        name: "Trova l'Intruso",
                        emoji: "üëÄ",
                        type: "quiz",
                        data: [
                            { q: "üçéüçäü•ïüçã", a: "ü•ï Carota", wrong: ["üçé Mela", "üçä Arancia", "üçã Limone"] },
                            { q: "üê∂üê±ü¶Åüê∞", a: "ü¶Å Leone", wrong: ["üê∂ Cane", "üê± Gatto", "üê∞ Coniglio"] },
                            { q: "‚úàÔ∏èüöóüö¢üå≥", a: "üå≥ Albero", wrong: ["‚úàÔ∏è Aereo", "üöó Auto", "üö¢ Nave"] },
                            { q: "üëïüëñüß¶üçï", a: "üçï Pizza", wrong: ["üëï Maglia", "üëñ Pantaloni", "üß¶ Calzini"] }
                        ]
                    },
                    {
                        name: "Memory Sequenze",
                        emoji: "üß†",
                        type: "memory",
                        data: ["1Ô∏è‚É£", "2Ô∏è‚É£", "3Ô∏è‚É£", "üî¥", "üü°", "üü¢"]
                    },
                    {
                        name: "Completa la Serie",
                        emoji: "‚û°Ô∏è",
                        type: "sequence",
                        data: [
                            { sequence: ["üåë", "üåí", "üåì", "üåî", "üåï"], name: "Luna" },
                            { sequence: ["ü•í", "ü•ï", "üçÖ", "üåΩ", "ü•¶"], name: "Verdure" },
                            { sequence: ["üêõ", "ü¶ã", "üêõ", "ü¶ã", "üêõ"], name: "Ritmo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 32: ALTRI SPORT =====
            32: {
                title: "Altri Sport",
                emoji: "‚öΩ",
                activities: [
                    {
                        name: "Che Sport √à?",
                        emoji: "üèÜ",
                        type: "quiz",
                        data: [
                            { q: "üéæ", a: "Tennis", wrong: ["Calcio", "Basket", "Pallavolo"] },
                            { q: "üèÄ", a: "Basket", wrong: ["Calcio", "Tennis", "Pallavolo"] },
                            { q: "üèê", a: "Pallavolo", wrong: ["Basket", "Calcio", "Tennis"] },
                            { q: "üèä", a: "Nuoto", wrong: ["Corsa", "Ciclismo", "Sci"] },
                            { q: "‚õ∑Ô∏è", a: "Sci", wrong: ["Pattinaggio", "Nuoto", "Corsa"] },
                            { q: "üö¥", a: "Ciclismo", wrong: ["Moto", "Corsa", "Nuoto"] },
                            { q: "ü•ä", a: "Boxe", wrong: ["Karate", "Judo", "Wrestling"] },
                            { q: "‚õ≥", a: "Golf", wrong: ["Tennis", "Cricket", "Baseball"] }
                        ]
                    },
                    {
                        name: "Memory Sport",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚öΩ", "üèÄ", "üéæ", "üèä", "‚õ∑Ô∏è", "üö¥"]
                    },
                    {
                        name: "Cosa Uso?",
                        emoji: "üéΩ",
                        type: "matching",
                        data: [
                            { item: "‚öΩ Calcio", match: "üëü Scarpe" },
                            { item: "üèä Nuoto", match: "ü©± Costume" },
                            { item: "üö¥ Ciclismo", match: "üö≤ Bici" },
                            { item: "‚õ∑Ô∏è Sci", match: "üéø Sci" }
                        ]
                    },
                    {
                        name: "Estate o Inverno?",
                        emoji: "üóìÔ∏è",
                        type: "sorting",
                        data: [
                            { item: "üèä Nuoto", category: "Estate", wrong: "Inverno" },
                            { item: "‚õ∑Ô∏è Sci", category: "Inverno", wrong: "Estate" },
                            { item: "üèñÔ∏è Beach volley", category: "Estate", wrong: "Inverno" },
                            { item: "‚õ∏Ô∏è Pattinaggio", category: "Inverno", wrong: "Estate" },
                            { item: "üèÑ Surf", category: "Estate", wrong: "Inverno" },
                            { item: "üèÇ Snowboard", category: "Inverno", wrong: "Estate" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 33: I VIAGGI =====
            33: {
                title: "I Viaggi",
                emoji: "üöÇ",
                activities: [
                    {
                        name: "Come Viaggio?",
                        emoji: "‚úàÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "‚úàÔ∏è", a: "Aereo", wrong: ["Elicottero", "Nave", "Treno"] },
                            { q: "üöÇ", a: "Treno", wrong: ["Metro", "Tram", "Autobus"] },
                            { q: "üö¢", a: "Nave", wrong: ["Barca", "Traghetto", "Sommergibile"] },
                            { q: "üöå", a: "Autobus", wrong: ["Tram", "Treno", "Auto"] },
                            { q: "üöÅ", a: "Elicottero", wrong: ["Aereo", "Drone", "Mongolfiera"] },
                            { q: "üéà", a: "Mongolfiera", wrong: ["Palloncino", "Aereo", "Elicottero"] }
                        ]
                    },
                    {
                        name: "Memory Viaggi",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚úàÔ∏è", "üöÇ", "üö¢", "üöå", "üöÅ", "üöó"]
                    },
                    {
                        name: "Cosa Porto?",
                        emoji: "üß≥",
                        type: "matching",
                        data: [
                            { item: "üèñÔ∏è Mare", match: "üëô Costume" },
                            { item: "‚õ∑Ô∏è Montagna", match: "üß• Giacca" },
                            { item: "üåßÔ∏è Pioggia", match: "‚òÇÔ∏è Ombrello" },
                            { item: "‚òÄÔ∏è Sole", match: "üï∂Ô∏è Occhiali" }
                        ]
                    },
                    {
                        name: "Terra, Mare o Cielo?",
                        emoji: "üåç",
                        type: "sorting",
                        data: [
                            { item: "‚úàÔ∏è Aereo", category: "Cielo", wrong: "Terra" },
                            { item: "üöó Auto", category: "Terra", wrong: "Mare" },
                            { item: "üö¢ Nave", category: "Mare", wrong: "Cielo" },
                            { item: "üöÇ Treno", category: "Terra", wrong: "Mare" },
                            { item: "üöÅ Elicottero", category: "Cielo", wrong: "Terra" },
                            { item: "‚õµ Barca", category: "Mare", wrong: "Cielo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 34: LA CUCINA =====
            34: {
                title: "La Cucina",
                emoji: "üç≥",
                activities: [
                    {
                        name: "Cosa √à?",
                        emoji: "ü•Ñ",
                        type: "quiz",
                        data: [
                            { q: "üç≥", a: "Padella", wrong: ["Pentola", "Piatto", "Teglia"] },
                            { q: "ü•Ñ", a: "Cucchiaio", wrong: ["Forchetta", "Coltello", "Mestolo"] },
                            { q: "üç¥", a: "Forchetta", wrong: ["Cucchiaio", "Coltello", "Bacchette"] },
                            { q: "üî™", a: "Coltello", wrong: ["Forbici", "Forchetta", "Mestolo"] },
                            { q: "ü´ñ", a: "Teiera", wrong: ["Caffettiera", "Bollitore", "Tazza"] },
                            { q: "üßä", a: "Ghiaccio", wrong: ["Acqua", "Zucchero", "Sale"] }
                        ]
                    },
                    {
                        name: "Memory Cucina",
                        emoji: "üß†",
                        type: "memory",
                        data: ["üç≥", "ü•Ñ", "üç¥", "üî™", "ü´ñ", "ü•£"]
                    },
                    {
                        name: "Cosa Cucino?",
                        emoji: "üë®‚Äçüç≥",
                        type: "matching",
                        data: [
                            { item: "ü•öüç≥", match: "üç≥ Uova fritte" },
                            { item: "üçùüçÖ", match: "üçù Spaghetti" },
                            { item: "ü•õüç´", match: "‚òï Cioccolata" },
                            { item: "üçûüßÄ", match: "ü•™ Panino" }
                        ]
                    },
                    {
                        name: "Caldo o Freddo?",
                        emoji: "üå°Ô∏è",
                        type: "sorting",
                        data: [
                            { item: "‚òï Caff√®", category: "Caldo", wrong: "Freddo" },
                            { item: "üç¶ Gelato", category: "Freddo", wrong: "Caldo" },
                            { item: "üçù Pasta", category: "Caldo", wrong: "Freddo" },
                            { item: "ü•§ Aranciata", category: "Freddo", wrong: "Caldo" },
                            { item: "üçï Pizza", category: "Caldo", wrong: "Freddo" },
                            { item: "üç® Sorbetto", category: "Freddo", wrong: "Caldo" }
                        ]
                    }
                ]
            },

            // ===== INCONTRO 35: LA SCUOLA =====
            35: {
                title: "La Scuola",
                emoji: "üéì",
                activities: [
                    {
                        name: "Cosa √à?",
                        emoji: "‚úèÔ∏è",
                        type: "quiz",
                        data: [
                            { q: "‚úèÔ∏è", a: "Matita", wrong: ["Penna", "Pennarello", "Gesso"] },
                            { q: "üìö", a: "Libri", wrong: ["Quaderni", "Fogli", "Giornali"] },
                            { q: "üéí", a: "Zaino", wrong: ["Borsa", "Valigia", "Sacchetto"] },
                            { q: "üìê", a: "Righello", wrong: ["Squadra", "Compasso", "Goniometro"] },
                            { q: "‚úÇÔ∏è", a: "Forbici", wrong: ["Coltello", "Taglierino", "Cutter"] },
                            { q: "üñçÔ∏è", a: "Pastelli", wrong: ["Matite", "Pennarelli", "Gessi"] },
                            { q: "üìì", a: "Quaderno", wrong: ["Libro", "Diario", "Agenda"] },
                            { q: "üßÆ", a: "Pallottoliere", wrong: ["Calcolatrice", "Computer", "Tablet"] }
                        ]
                    },
                    {
                        name: "Memory Scuola",
                        emoji: "üß†",
                        type: "memory",
                        data: ["‚úèÔ∏è", "üìö", "üéí", "üìê", "‚úÇÔ∏è", "üìì"]
                    },
                    {
                        name: "Che Materia √à?",
                        emoji: "üìñ",
                        type: "matching",
                        data: [
                            { item: "üî¢ Numeri", match: "‚ûï Matematica" },
                            { item: "üî§ Lettere", match: "üìù Italiano" },
                            { item: "üåç Paesi", match: "üó∫Ô∏è Geografia" },
                            { item: "üé® Disegno", match: "üñåÔ∏è Arte" }
                        ]
                    },
                    {
                        name: "A Scuola o A Casa?",
                        emoji: "üè´",
                        type: "sorting",
                        data: [
                            { item: "üìö Studiare", category: "Scuola", wrong: "Casa" },
                            { item: "üéÆ Videogiochi", category: "Casa", wrong: "Scuola" },
                            { item: "‚úèÔ∏è Compiti classe", category: "Scuola", wrong: "Casa" },
                            { item: "üì∫ Cartoni", category: "Casa", wrong: "Scuola" },
                            { item: "üèÉ Ricreazione", category: "Scuola", wrong: "Casa" },
                            { item: "üõèÔ∏è Dormire", category: "Casa", wrong: "Scuola" }
                        ]
                    }
                ]
            }
        };

        // ==================== RENDER ATTIVIT√Ä ====================
        function renderActivity() {
            const area = document.getElementById('game-area');
            const nextBtn = document.getElementById('next-btn');
            nextBtn.style.display = 'inline-flex';
            nextBtn.textContent = '‚û°Ô∏è Avanti';
            
            switch (currentActivity.type) {
                case 'quiz':
                    renderQuiz(area);
                    break;
                case 'memory':
                    renderMemory(area);
                    nextBtn.textContent = 'üîÑ Nuova Partita';
                    break;
                case 'matching':
                    renderMatching(area);
                    nextBtn.style.display = 'none';
                    break;
                case 'sorting':
                    renderSorting(area);
                    break;
                case 'sequence':
                    renderSequence(area);
                    break;
                case 'instruments':
                    renderInstruments(area);
                    nextBtn.style.display = 'none';
                    break;
                case 'naturesounds':
                    renderNatureSounds(area);
                    nextBtn.style.display = 'none';
                    break;
                case 'colors':
                    renderColors(area);
                    break;
                case 'drawing':
                    renderDrawing(area);
                    nextBtn.textContent = 'üóëÔ∏è Cancella Tutto';
                    break;
                case 'freeplay':
                    renderFreeplay(area);
                    nextBtn.style.display = 'none';
                    break;
            }
        }

        function nextQuestion() {
            switch (currentActivity.type) {
                case 'quiz':
                case 'sorting':
                case 'colors':
                case 'sequence':
                    currentQuestion++;
                    if (currentQuestion >= currentActivity.data.length) {
                        currentQuestion = 0;
                        shuffleArray(currentActivity.data);
                    }
                    renderActivity();
                    break;
                case 'memory':
                    initMemoryGame();
                    break;
                case 'drawing':
                    clearCanvas();
                    break;
            }
        }

        // ==================== QUIZ ====================
        function renderQuiz(area) {
            const item = currentActivity.data[currentQuestion];
            const answers = [item.a, ...item.wrong].sort(() => Math.random() - 0.5);
            
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">‚≠ê Punti: ${currentScore}</div>
                </div>
                <div class="quiz-content">
                    <div class="quiz-image">${item.q}</div>
                    <p class="encouragement" id="encourage"></p>
                    <div class="answer-grid">
                        ${answers.map(a => `
                            <button class="answer-btn" onclick="checkQuizAnswer(this, '${a.replace(/'/g, "\\'")}', '${item.a.replace(/'/g, "\\'")}')">${a}</button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function checkQuizAnswer(btn, selected, correct) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(b => b.disabled = true);
            
            if (selected === correct) {
                btn.classList.add('correct');
                currentScore++;
                document.querySelector('.score-item').innerHTML = `‚≠ê Punti: ${currentScore}`;
                document.getElementById('encourage').textContent = getEncouragement(true);
                showFeedback(true, 'GIUSTO!');
            } else {
                btn.classList.add('wrong');
                buttons.forEach(b => { if (b.textContent === correct) b.classList.add('correct'); });
                document.getElementById('encourage').textContent = getEncouragement(false);
                showFeedback(false, 'Riprova!');
            }
        }

        // ==================== MEMORY ====================
        let memoryCards = [];
        let flipped = [];
        let memoryMatched = 0;
        let canFlip = true;

        function renderMemory(area) {
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">üéØ Coppie: <span id="mem-score">0</span>/${currentActivity.data.length}</div>
                </div>
                <p class="encouragement" id="encourage">Trova le coppie uguali!</p>
                <div class="memory-grid" id="mem-grid"></div>
            `;
            initMemoryGame();
        }

        function initMemoryGame() {
            memoryCards = [...currentActivity.data, ...currentActivity.data].sort(() => Math.random() - 0.5);
            flipped = [];
            memoryMatched = 0;
            canFlip = true;
            document.getElementById('mem-score').textContent = '0';
            document.getElementById('encourage').textContent = 'Trova le coppie uguali!';
            
            const grid = document.getElementById('mem-grid');
            grid.innerHTML = memoryCards.map((icon, i) => `
                <div class="memory-card" onclick="flipMemory(this, ${i})">
                    <span class="back">‚ùì</span>
                    <span class="front">${icon}</span>
                </div>
            `).join('');
        }

        function flipMemory(card, index) {
            if (!canFlip || card.classList.contains('flipped') || card.classList.contains('matched')) return;
            
            card.classList.add('flipped');
            flipped.push({ card, index, icon: memoryCards[index] });
            
            if (flipped.length === 2) {
                canFlip = false;
                if (flipped[0].icon === flipped[1].icon) {
                    setTimeout(() => {
                        flipped[0].card.classList.add('matched');
                        flipped[1].card.classList.add('matched');
                        memoryMatched++;
                        document.getElementById('mem-score').textContent = memoryMatched;
                        document.getElementById('encourage').textContent = getEncouragement(true);
                        playSuccess();
                        if (memoryMatched === currentActivity.data.length) {
                            showFeedback(true, 'HAI VINTO! üèÜ');
                        }
                        flipped = [];
                        canFlip = true;
                    }, 400);
                } else {
                    setTimeout(() => {
                        flipped[0].card.classList.remove('flipped');
                        flipped[1].card.classList.remove('flipped');
                        document.getElementById('encourage').textContent = 'Continua a cercare! üîç';
                        flipped = [];
                        canFlip = true;
                    }, 800);
                }
            }
        }

        // ==================== MATCHING ====================
        let matchingSelected = null;
        let matchingDone = 0;

        function renderMatching(area) {
            const data = [...currentActivity.data].sort(() => Math.random() - 0.5);
            const matches = data.map(d => d.match).sort(() => Math.random() - 0.5);
            matchingSelected = null;
            matchingDone = 0;
            
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">üéØ Abbinati: <span id="match-score">0</span>/${data.length}</div>
                </div>
                <p class="encouragement" id="encourage">Abbina gli elementi!</p>
                <div class="matching-container">
                    <div class="matching-column" id="match-left">
                        ${data.map((d, i) => `
                            <div class="matching-item" data-value="${d.item}" onclick="selectMatching(this, 'left')">${d.item}</div>
                        `).join('')}
                    </div>
                    <div class="matching-column" id="match-right">
                        ${matches.map(m => `
                            <div class="matching-item text" data-value="${m}" onclick="selectMatching(this, 'right')">${m}</div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function selectMatching(el, side) {
            if (el.classList.contains('matched')) return;
            
            document.querySelectorAll('.matching-item').forEach(item => {
                if (!item.classList.contains('matched')) item.classList.remove('selected');
            });
            
            if (!matchingSelected) {
                matchingSelected = { el, side, value: el.dataset.value };
                el.classList.add('selected');
            } else if (matchingSelected.side !== side) {
                const leftVal = side === 'left' ? el.dataset.value : matchingSelected.value;
                const rightVal = side === 'right' ? el.dataset.value : matchingSelected.value;
                
                const match = currentActivity.data.find(d => d.item === leftVal && d.match === rightVal);
                
                if (match) {
                    el.classList.add('matched');
                    matchingSelected.el.classList.add('matched');
                    matchingDone++;
                    document.getElementById('match-score').textContent = matchingDone;
                    document.getElementById('encourage').textContent = getEncouragement(true);
                    playSuccess();
                    
                    if (matchingDone === currentActivity.data.length) {
                        showFeedback(true, 'PERFETTO! üèÜ');
                    }
                } else {
                    document.getElementById('encourage').textContent = getEncouragement(false);
                    playError();
                }
                matchingSelected = null;
            } else {
                matchingSelected = { el, side, value: el.dataset.value };
                el.classList.add('selected');
            }
        }

        // ==================== SORTING ====================
        function renderSorting(area) {
            const item = currentActivity.data[currentQuestion];
            const options = [item.category, item.wrong].sort(() => Math.random() - 0.5);
            
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">‚≠ê Punti: ${currentScore}</div>
                </div>
                <div class="sorting-container">
                    <div class="sorting-item">${item.item}</div>
                    <p class="encouragement" id="encourage"></p>
                    <div class="sorting-options">
                        ${options.map(o => `
                            <button class="sorting-btn" onclick="checkSorting(this, '${o}', '${item.category}')">${o}</button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function checkSorting(btn, selected, correct) {
            const buttons = document.querySelectorAll('.sorting-btn');
            buttons.forEach(b => b.disabled = true);
            
            if (selected === correct) {
                btn.style.background = 'var(--verde)';
                btn.style.color = 'white';
                currentScore++;
                document.querySelector('.score-item').innerHTML = `‚≠ê Punti: ${currentScore}`;
                document.getElementById('encourage').textContent = getEncouragement(true);
                showFeedback(true, 'GIUSTO!');
            } else {
                btn.style.background = 'var(--rosso)';
                btn.style.color = 'white';
                buttons.forEach(b => { if (b.textContent === correct) { b.style.background = 'var(--verde)'; b.style.color = 'white'; }});
                document.getElementById('encourage').textContent = getEncouragement(false);
                showFeedback(false, 'Riprova!');
            }
        }

        // ==================== SEQUENCE ====================
        function renderSequence(area) {
            const item = currentActivity.data[currentQuestion];
            const options = [...item.options].sort(() => Math.random() - 0.5);
            
            // Controlla se sono elementi testuali (non emoji)
            const isText = item.items[0].length > 2;
            const textClass = isText ? ' text-item' : '';
            
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">‚≠ê Punti: ${currentScore}</div>
                </div>
                <div class="sequence-display">
                    ${item.items.map(i => `<div class="sequence-item${textClass}">${i}</div>`).join('')}
                    <div class="sequence-item mystery${textClass}">‚ùì</div>
                </div>
                <p class="encouragement" id="encourage">Cosa viene dopo?</p>
                <div class="answer-grid">
                    ${options.map(o => `
                        <button class="answer-btn" onclick="checkSequence(this, '${o}', '${item.answer}')">${o}</button>
                    `).join('')}
                </div>
            `;
        }

        function checkSequence(btn, selected, correct) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(b => b.disabled = true);
            
            const mystery = document.querySelector('.sequence-item.mystery');
            const isTextItem = mystery.classList.contains('text-item');
            
            if (selected === correct) {
                btn.classList.add('correct');
                mystery.textContent = correct;
                mystery.classList.remove('mystery');
                mystery.style.background = 'var(--verde)';
                mystery.style.color = 'white';
                if (isTextItem) {
                    mystery.style.fontSize = '18px';
                }
                currentScore++;
                document.querySelector('.score-item').innerHTML = `‚≠ê Punti: ${currentScore}`;
                document.getElementById('encourage').textContent = getEncouragement(true);
                showFeedback(true, 'GIUSTO!');
            } else {
                btn.classList.add('wrong');
                buttons.forEach(b => { if (b.textContent === correct) b.classList.add('correct'); });
                document.getElementById('encourage').textContent = getEncouragement(false);
                showFeedback(false, 'Riprova!');
            }
        }

        // ==================== INSTRUMENTS ====================
        function renderInstruments(area) {
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <p style="text-align: center; font-size: 20px; margin-bottom: 25px; font-weight: 600;">
                    Tocca uno strumento per suonarlo! üé∂
                </p>
                <div class="instruments-grid">
                    ${currentActivity.data.map((inst, i) => `
                        <button class="instrument-btn" onclick="playInstrument(this, ${i})" title="${inst.name}">${inst.emoji}</button>
                    `).join('')}
                </div>
                <p class="encouragement" id="encourage" style="margin-top: 25px;">Prova tutti gli strumenti!</p>
            `;
        }

        function playInstrument(btn, index) {
            var inst = currentActivity.data[index];
            btn.classList.add('playing');
            
            // Chiama la funzione specifica per ogni strumento
            switch(inst.type) {
                case 'piano': playPiano(); break;
                case 'guitar': playGuitar(); break;
                case 'drum': playDrum(); break;
                case 'trumpet': playTrumpet(); break;
                case 'violin': playViolin(); break;
                case 'bell': playBell(); break;
                case 'flute': playFlute(); break;
                case 'saxophone': playSaxophone(); break;
                case 'accordion': playAccordion(); break;
                case 'xylophone': playXylophone(); break;
                case 'harp': playHarp(); break;
                case 'organ': playOrgan(); break;
                case 'banjo': playBanjo(); break;
                case 'tuba': playTuba(); break;
                case 'bongos': playBongos(); break;
                case 'harmonica': playHarmonica(); break;
                case 'triangle': playTriangle(); break;
                case 'maracas': playMaracas(); break;
            }
            
            document.getElementById('encourage').textContent = 'üéµ ' + inst.name + '! Bellissimo!';
            setTimeout(function() { btn.classList.remove('playing'); }, 500);
        }

        // ==================== NATURE SOUNDS ====================
        function renderNatureSounds(area) {
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <p style="text-align: center; font-size: 20px; margin-bottom: 25px; font-weight: 600;">
                    Ascolta i suoni della natura! üåø
                </p>
                <div class="instruments-grid">
                    ${currentActivity.data.map((sound, i) => `
                        <button class="instrument-btn nature-btn" onclick="playNatureSound(this, ${i})" title="${sound.name}">${sound.emoji}</button>
                    `).join('')}
                </div>
                <p class="encouragement" id="encourage" style="margin-top: 25px;">Tocca per ascoltare!</p>
            `;
        }

        function playNatureSound(btn, index) {
            var sound = currentActivity.data[index];
            btn.classList.add('playing');
            stopAllSounds();
            
            switch(sound.type) {
                case 'rain': playRain(); break;
                case 'thunder': playThunder(); break;
                case 'waves': playWaves(); break;
                case 'wind': playWind(); break;
                case 'birds': playBirds(); break;
                case 'stream': playStream(); break;
                case 'fire': playFire(); break;
                case 'crickets': playCrickets(); break;
                case 'forest': playForest(); break;
                case 'frogs': playFrogs(); break;
                case 'owl': playOwl(); break;
                case 'wolf': playWolf(); break;
            }
            
            document.getElementById('encourage').textContent = 'üåø ' + sound.name + '!';
            setTimeout(function() { btn.classList.remove('playing'); }, 500);
        }

        // üåßÔ∏è PIOGGIA - Rumore filtrato con gocce
        function playRain() {
            var ctx = getAudioContext();
            var duration = 6;
            
            // Rumore di fondo della pioggia
            var bufferSize = ctx.sampleRate * duration;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 800;
            
            var gain = ctx.createGain();
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.5);
            gain.gain.setValueAtTime(0.3, ctx.currentTime + duration - 0.5);
            gain.gain.linearRampToValueAtTime(0, ctx.currentTime + duration);
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            noise.start(ctx.currentTime);
            
            // Gocce singole
            for (var d = 0; d < 30; d++) {
                var t = setTimeout(function() {
                    playRaindrop(ctx);
                }, d * 200 + Math.random() * 100);
                activeTimeouts.push(t);
            }
        }
        
        function playRaindrop(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(2000 + Math.random() * 2000, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(500, ctx.currentTime + 0.02);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.05);
            activeOscillators.push(osc);
        }

        // ‚õàÔ∏è TEMPORALE - Pioggia + tuoni
        function playThunder() {
            var ctx = getAudioContext();
            
            // Pioggia di fondo
            var bufferSize = ctx.sampleRate * 6;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 600;
            var gain = ctx.createGain();
            gain.gain.value = 0.2;
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            noise.start(ctx.currentTime);
            
            // Tuoni
            var thunderTimes = [500, 2000, 4000];
            thunderTimes.forEach(function(time) {
                var t = setTimeout(function() {
                    playThunderClap(ctx);
                }, time);
                activeTimeouts.push(t);
            });
        }
        
        function playThunderClap(ctx) {
            var bufferSize = ctx.sampleRate * 2;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (ctx.sampleRate * 0.3));
            }
            var thunder = ctx.createBufferSource();
            thunder.buffer = buffer;
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 150;
            var gain = ctx.createGain();
            gain.gain.setValueAtTime(0.8, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 1.5);
            thunder.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            thunder.start(ctx.currentTime);
        }

        // üåä ONDE DEL MARE
        function playWaves() {
            var ctx = getAudioContext();
            var duration = 6;
            
            var bufferSize = ctx.sampleRate * duration;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 500;
            
            // Modulazione per le onde
            var lfo = ctx.createOscillator();
            var lfoGain = ctx.createGain();
            lfo.type = 'sine';
            lfo.frequency.value = 0.15; // Onde lente
            lfoGain.gain.value = 0.25;
            lfo.connect(lfoGain);
            
            var gain = ctx.createGain();
            lfoGain.connect(gain.gain);
            gain.gain.value = 0.3;
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            
            lfo.start(ctx.currentTime);
            noise.start(ctx.currentTime);
            activeOscillators.push(lfo);
        }

        // üí® VENTO
        function playWind() {
            var ctx = getAudioContext();
            var duration = 6;
            
            var bufferSize = ctx.sampleRate * duration;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.value = 400;
            filter.Q.value = 0.5;
            
            // Modulazione del filtro per raffiche
            var lfo = ctx.createOscillator();
            var lfoGain = ctx.createGain();
            lfo.type = 'sine';
            lfo.frequency.value = 0.3;
            lfoGain.gain.value = 200;
            lfo.connect(lfoGain);
            lfoGain.connect(filter.frequency);
            
            var gain = ctx.createGain();
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.4, ctx.currentTime + 1);
            gain.gain.setValueAtTime(0.4, ctx.currentTime + 5);
            gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 6);
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            
            lfo.start(ctx.currentTime);
            noise.start(ctx.currentTime);
            activeOscillators.push(lfo);
        }

        // üê¶ UCCELLINI
        function playBirds() {
            var ctx = getAudioContext();
            
            for (var b = 0; b < 20; b++) {
                var t = setTimeout(function() {
                    playBirdChirp(ctx);
                }, b * 300 + Math.random() * 200);
                activeTimeouts.push(t);
            }
        }
        
        function playBirdChirp(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            var baseFreq = 2000 + Math.random() * 2000;
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(baseFreq, ctx.currentTime);
            osc.frequency.setValueAtTime(baseFreq * 1.5, ctx.currentTime + 0.05);
            osc.frequency.setValueAtTime(baseFreq * 1.2, ctx.currentTime + 0.1);
            osc.frequency.setValueAtTime(baseFreq * 1.8, ctx.currentTime + 0.15);
            
            gain.gain.setValueAtTime(0.15, ctx.currentTime);
            gain.gain.setValueAtTime(0.1, ctx.currentTime + 0.1);
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.2);
            
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.2);
            activeOscillators.push(osc);
        }

        // üíß RUSCELLO
        function playStream() {
            var ctx = getAudioContext();
            var duration = 6;
            
            // Flusso d'acqua di base
            var bufferSize = ctx.sampleRate * duration;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.value = 2000;
            filter.Q.value = 1;
            
            var gain = ctx.createGain();
            gain.gain.value = 0.15;
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            noise.start(ctx.currentTime);
            
            // Gorgoglii
            for (var g = 0; g < 25; g++) {
                var t = setTimeout(function() {
                    playBubble(ctx);
                }, g * 240 + Math.random() * 100);
                activeTimeouts.push(t);
            }
        }
        
        function playBubble(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            var freq = 300 + Math.random() * 400;
            osc.type = 'sine';
            osc.frequency.setValueAtTime(freq, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(freq * 2, ctx.currentTime + 0.03);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.05);
            activeOscillators.push(osc);
        }

        // üî• FUOCO
        function playFire() {
            var ctx = getAudioContext();
            var duration = 6;
            
            // Crepitio di base
            var bufferSize = ctx.sampleRate * duration;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 300;
            
            var gain = ctx.createGain();
            gain.gain.value = 0.2;
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            noise.start(ctx.currentTime);
            
            // Scoppiettii
            for (var c = 0; c < 40; c++) {
                var t = setTimeout(function() {
                    playCrackle(ctx);
                }, c * 150 + Math.random() * 100);
                activeTimeouts.push(t);
            }
        }
        
        function playCrackle(ctx) {
            var bufferSize = ctx.sampleRate * 0.03;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (bufferSize * 0.3));
            }
            var crackle = ctx.createBufferSource();
            crackle.buffer = buffer;
            var filter = ctx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 1000;
            var gain = ctx.createGain();
            gain.gain.value = 0.3 + Math.random() * 0.3;
            crackle.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            crackle.start(ctx.currentTime);
        }

        // ü¶ó GRILLI
        function playCrickets() {
            var ctx = getAudioContext();
            
            for (var c = 0; c < 15; c++) {
                var t = setTimeout(function() {
                    playCricketChirp(ctx);
                }, c * 400 + Math.random() * 200);
                activeTimeouts.push(t);
            }
        }
        
        function playCricketChirp(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            var freq = 4000 + Math.random() * 1000;
            
            osc.type = 'sine';
            osc.frequency.value = freq;
            
            // Modulazione rapida per il cri-cri
            var lfo = ctx.createOscillator();
            var lfoGain = ctx.createGain();
            lfo.frequency.value = 30;
            lfoGain.gain.value = 0.5;
            lfo.connect(lfoGain);
            lfoGain.connect(gain.gain);
            
            gain.gain.value = 0.1;
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            osc.start(ctx.currentTime);
            lfo.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.3);
            lfo.stop(ctx.currentTime + 0.3);
            activeOscillators.push(osc);
            activeOscillators.push(lfo);
        }

        // üå≤ FORESTA
        function playForest() {
            var ctx = getAudioContext();
            
            // Vento leggero
            var bufferSize = ctx.sampleRate * 6;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            var noise = ctx.createBufferSource();
            noise.buffer = buffer;
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 300;
            var gain = ctx.createGain();
            gain.gain.value = 0.1;
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            noise.start(ctx.currentTime);
            
            // Uccelli sparsi
            for (var b = 0; b < 12; b++) {
                var t = setTimeout(function() {
                    playBirdChirp(ctx);
                }, b * 500 + Math.random() * 300);
                activeTimeouts.push(t);
            }
            
            // Foglie
            for (var l = 0; l < 8; l++) {
                var t2 = setTimeout(function() {
                    playLeafRustle(ctx);
                }, l * 750 + Math.random() * 300);
                activeTimeouts.push(t2);
            }
        }
        
        function playLeafRustle(ctx) {
            var bufferSize = ctx.sampleRate * 0.2;
            var buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (bufferSize * 0.5));
            }
            var rustle = ctx.createBufferSource();
            rustle.buffer = buffer;
            var filter = ctx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 2000;
            var gain = ctx.createGain();
            gain.gain.value = 0.15;
            rustle.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            rustle.start(ctx.currentTime);
        }

        // üê∏ RANE
        function playFrogs() {
            var ctx = getAudioContext();
            
            for (var f = 0; f < 12; f++) {
                var t = setTimeout(function() {
                    playFrogCroak(ctx);
                }, f * 500 + Math.random() * 300);
                activeTimeouts.push(t);
            }
        }
        
        function playFrogCroak(ctx) {
            var osc = ctx.createOscillator();
            var gain = ctx.createGain();
            var baseFreq = 150 + Math.random() * 100;
            
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(baseFreq, ctx.currentTime);
            osc.frequency.setValueAtTime(baseFreq * 0.8, ctx.currentTime + 0.1);
            osc.frequency.setValueAtTime(baseFreq * 1.2, ctx.currentTime + 0.15);
            osc.frequency.setValueAtTime(baseFreq * 0.7, ctx.currentTime + 0.25);
            
            var filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 500;
            
            gain.gain.setValueAtTime(0.2, ctx.currentTime);
            gain.gain.setValueAtTime(0.15, ctx.currentTime + 0.15);
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.3);
            
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.3);
            activeOscillators.push(osc);
        }

        // ü¶â GUFO
        function playOwl() {
            var ctx = getAudioContext();
            
            var hoots = [0, 600, 1500, 2500, 4000, 5000];
            hoots.forEach(function(time) {
                var t = setTimeout(function() {
                    playOwlHoot(ctx);
                }, time);
                activeTimeouts.push(t);
            });
        }
        
        function playOwlHoot(ctx) {
            // Prima nota "hoo"
            var osc1 = ctx.createOscillator();
            var gain1 = ctx.createGain();
            osc1.type = 'sine';
            osc1.frequency.setValueAtTime(350, ctx.currentTime);
            osc1.frequency.exponentialRampToValueAtTime(300, ctx.currentTime + 0.3);
            gain1.gain.setValueAtTime(0, ctx.currentTime);
            gain1.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.05);
            gain1.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.35);
            osc1.connect(gain1);
            gain1.connect(ctx.destination);
            osc1.start(ctx.currentTime);
            osc1.stop(ctx.currentTime + 0.35);
            activeOscillators.push(osc1);
            
            // Seconda nota "hoo" (pi√π bassa)
            var osc2 = ctx.createOscillator();
            var gain2 = ctx.createGain();
            osc2.type = 'sine';
            osc2.frequency.setValueAtTime(280, ctx.currentTime + 0.4);
            osc2.frequency.exponentialRampToValueAtTime(220, ctx.currentTime + 0.8);
            gain2.gain.setValueAtTime(0, ctx.currentTime + 0.4);
            gain2.gain.linearRampToValueAtTime(0.25, ctx.currentTime + 0.45);
            gain2.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.9);
            osc2.connect(gain2);
            gain2.connect(ctx.destination);
            osc2.start(ctx.currentTime + 0.4);
            osc2.stop(ctx.currentTime + 0.9);
            activeOscillators.push(osc2);
        }

        // üê∫ LUPO
        function playWolf() {
            var ctx = getAudioContext();
            
            var howls = [0, 3000];
            howls.forEach(function(time) {
                var t = setTimeout(function() {
                    playWolfHowl(ctx);
                }, time);
                activeTimeouts.push(t);
            });
        }
        
        function playWolfHowl(ctx) {
            var osc = ctx.createOscillator();
            var vibrato = ctx.createOscillator();
            var vibratoGain = ctx.createGain();
            var gain = ctx.createGain();
            var filter = ctx.createBiquadFilter();
            
            osc.type = 'sawtooth';
            // Ululato con glissando
            osc.frequency.setValueAtTime(200, ctx.currentTime);
            osc.frequency.linearRampToValueAtTime(400, ctx.currentTime + 0.5);
            osc.frequency.setValueAtTime(400, ctx.currentTime + 1.5);
            osc.frequency.linearRampToValueAtTime(250, ctx.currentTime + 2.5);
            
            // Vibrato
            vibrato.type = 'sine';
            vibrato.frequency.value = 5;
            vibratoGain.gain.value = 10;
            vibrato.connect(vibratoGain);
            vibratoGain.connect(osc.frequency);
            
            filter.type = 'lowpass';
            filter.frequency.value = 800;
            
            gain.gain.setValueAtTime(0, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.3, ctx.currentTime + 1.8);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 2.5);
            
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(ctx.destination);
            
            vibrato.start(ctx.currentTime);
            osc.start(ctx.currentTime);
            vibrato.stop(ctx.currentTime + 2.5);
            osc.stop(ctx.currentTime + 2.5);
            activeOscillators.push(osc);
            activeOscillators.push(vibrato);
        }

        // ==================== COLORS ====================
        function renderColors(area) {
            const shuffled = [...currentActivity.data].sort(() => Math.random() - 0.5).slice(0, 6);
            const target = shuffled[Math.floor(Math.random() * shuffled.length)];
            
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <div class="score-bar">
                    <div class="score-item">‚≠ê Punti: ${currentScore}</div>
                </div>
                <div style="text-align: center;">
                    <p style="font-size: 26px; font-weight: 800; margin: 25px 0;">
                        Tocca il colore <span style="color: ${target.color}">${target.name}</span>!
                    </p>
                    <p class="encouragement" id="encourage"></p>
                    <div class="color-palette" style="max-width: 380px; margin: 0 auto;">
                        ${shuffled.map(c => `
                            <button class="color-btn" style="background: ${c.color}" 
                                onclick="checkColor(this, '${c.name}', '${target.name}')"></button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function checkColor(btn, selected, correct) {
            if (selected === correct) {
                btn.classList.add('active');
                currentScore++;
                document.querySelector('.score-item').innerHTML = `‚≠ê Punti: ${currentScore}`;
                document.getElementById('encourage').textContent = getEncouragement(true);
                showFeedback(true, 'GIUSTO!');
            } else {
                document.getElementById('encourage').textContent = getEncouragement(false);
                showFeedback(false, 'Riprova!');
            }
        }

        // ==================== DRAWING ====================
        let canvas, ctx;
        let drawing = false;
        let currentDrawColor = '#000000';

        function renderDrawing(area) {
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} Disegna!</h2>
                <div class="drawing-container">
                    <div class="color-palette">
                        <button class="color-btn active" style="background: #000000" onclick="setDrawColor(this, '#000000')"></button>
                        <button class="color-btn" style="background: #FF6B6B" onclick="setDrawColor(this, '#FF6B6B')"></button>
                        <button class="color-btn" style="background: #FFA94D" onclick="setDrawColor(this, '#FFA94D')"></button>
                        <button class="color-btn" style="background: #FFE066" onclick="setDrawColor(this, '#FFE066')"></button>
                        <button class="color-btn" style="background: #69DB7C" onclick="setDrawColor(this, '#69DB7C')"></button>
                        <button class="color-btn" style="background: #74C0FC" onclick="setDrawColor(this, '#74C0FC')"></button>
                        <button class="color-btn" style="background: #B197FC" onclick="setDrawColor(this, '#B197FC')"></button>
                        <button class="color-btn" style="background: #F783AC" onclick="setDrawColor(this, '#F783AC')"></button>
                    </div>
                    <div class="canvas-container">
                        <canvas id="drawCanvas" width="380" height="320"></canvas>
                    </div>
                    <p class="encouragement">Disegna quello che vuoi! üé®</p>
                </div>
            `;
            
            canvas = document.getElementById('drawCanvas');
            ctx = canvas.getContext('2d');
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.strokeStyle = currentDrawColor;
            
            canvas.addEventListener('mousedown', startDraw);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDraw);
            canvas.addEventListener('mouseout', stopDraw);
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDraw);
        }

        function setDrawColor(btn, color) {
            document.querySelectorAll('.drawing-container .color-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentDrawColor = color;
            if (ctx) ctx.strokeStyle = color;
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;
            return { x, y };
        }

        function startDraw(e) {
            drawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!drawing) return;
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDraw() {
            drawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            if (e.type === 'touchstart') startDraw(e);
            else if (e.type === 'touchmove') draw(e);
        }

        function clearCanvas() {
            if (ctx) {
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
        }

        // ==================== FREEPLAY (Suona i Colori) ====================
        function renderFreeplay(area) {
            area.innerHTML = `
                <h2 class="game-title">${currentActivity.emoji} ${currentActivity.name}</h2>
                <p style="text-align: center; font-size: 20px; margin-bottom: 25px; font-weight: 600;">
                    Tocca i colori per suonare le note! üéµ
                </p>
                <div class="freeplay-grid">
                    ${currentActivity.data.map((item, i) => `
                        <button class="freeplay-btn" style="background: ${item.color}" 
                            onclick="playFreeplayNote(this, ${item.note}, '${item.name}')">
                            <span class="note-name">${item.name}</span>
                        </button>
                    `).join('')}
                </div>
                <p class="encouragement" id="encourage" style="margin-top: 25px; font-size: 22px;">
                    Crea la tua musica! üé∂
                </p>
            `;
        }
        
        function playFreeplayNote(btn, freq, noteName) {
            var ctx = getAudioContext();
            
            // Feedback visivo
            btn.classList.add('playing');
            setTimeout(function() { btn.classList.remove('playing'); }, 200);
            
            // Suona la nota
            var osc = ctx.createOscillator();
            var osc2 = ctx.createOscillator();
            var gain = ctx.createGain();
            
            osc.type = 'triangle';
            osc2.type = 'sine';
            osc.frequency.value = freq;
            osc2.frequency.value = freq * 2;
            
            osc.connect(gain);
            osc2.connect(gain);
            gain.connect(ctx.destination);
            
            gain.gain.setValueAtTime(0.4, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.6);
            
            osc.start(ctx.currentTime);
            osc2.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.6);
            osc2.stop(ctx.currentTime + 0.6);
            
            // Mostra la nota suonata
            document.getElementById('encourage').innerHTML = 'üéµ ' + noteName + '! üéµ';
        }

        // ==================== INIT ====================
        initMainMenu();
    </script>
</body>
</html>
